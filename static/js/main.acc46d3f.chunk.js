(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,r){},18:function(e,t,r){e.exports=r(52)},51:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(15),o=r.n(s),l=r(2),i=r(5),c=r(7),u=r(6),p=r(11),m=r(8),d=r(9),y=r.n(d),b=(r(13),function(e){var t,r;return e.special?t=0==e.num?n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",null,"Start!")):[2,7,17,22,33,36].includes(e.num)?n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",{className:"random"},"?")):20==e.num?n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",null,"Stay for free")):[10,30].includes(e.num)?n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",null,"Street thugs!")):4==e.num?n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",null,"10% tax!")):n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),n.a.createElement("b",null,"20% tax!")):(t=n.a.createElement("div",{className:"face"},"#",e.num,n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),n.a.createElement("div",{className:y()("owner",e.playerColor)},e.owner?"owner: "+e.owner:null),n.a.createElement("br",null),e.level?"level: "+e.level:null),r=n.a.createElement("div",{className:y()("detail",e.provinceColor)},"#",e.num,n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),e.owner?"owner: "+e.owner:null,n.a.createElement("br",null),e.level?"level: "+e.level:null,n.a.createElement("br",null),e.rents?"rent: "+e.rents[e.level]*e.multiplier:null,n.a.createElement("br",null),e.garrisons?"garrison: "+e.garrisons[e.level]:null,n.a.createElement("br",null),e.upgradePrice?"upgrade price: "+e.upgradePrice:null)),n.a.createElement("div",{className:y()("square",e.styleName),id:e.id},t,n.a.createElement("div",{className:y()("province",e.provinceColor)}),r)}),h=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).playerColors=[null,"redText","blueText","purpleText","greenText"],r}return Object(m.a)(t,e),Object(i.a)(t,[{key:"createBoard",value:function(){var e=[];e.push(n.a.createElement("div",{className:"center"},n.a.createElement("h1",{className:"title"},"Mafia Wars")));var t=this.renderSquare(0,"corner");e.push(t);for(var r=[],a=1;a<10;a++)r.push(this.renderSquare(a));e.push(n.a.createElement("div",{className:"row horizontal-row top-row"},r)),t=this.renderSquare(10,"corner"),e.push(t),r=[];for(var s=11;s<20;s++)r.push(this.renderSquare(s));e.push(n.a.createElement("div",{className:"row vertical-row right-row"},r)),t=this.renderSquare(30,"corner"),e.push(t),r=[];for(var o=29;o>20;o--)r.push(this.renderSquare(o));e.push(n.a.createElement("div",{className:"row horizontal-row bottom-row"},r)),t=this.renderSquare(20,"corner"),e.push(t),r=[];for(var l=39;l>30;l--)r.push(this.renderSquare(l));return e.push(n.a.createElement("div",{className:"row vertical-row left-row"},r)),e}},{key:"renderSquare",value:function(e,t){var r="white";if(this.props.squares[e]&&this.props.squares[e].owner){var a=this.props.squares[e].owner;r=this.playerColors[a[a.length-1]]}return n.a.createElement(b,{key:e,id:"square"+e,num:e,multiplier:this.props.squares[e]?this.props.squares[e].multiplier:1,special:this.props.specials.includes(e),buyPrice:this.props.buyPrices[e],styleName:t,provinceColor:this.props.provinces[e],playerColor:r,owner:this.props.squares[e]?this.props.squares[e].owner:null,rents:this.props.squares[e]?this.props.squares[e].rents:null,garrisons:this.props.squares[e]?this.props.squares[e].garrisons:null,upgradePrice:this.props.squares[e]?this.props.squares[e].upgradePrice:null,level:this.props.squares[e]?this.props.squares[e].level:null,visitors:this.props.squares[e]?this.props.squares[e].visitors:null})}},{key:"render",value:function(){return n.a.createElement("div",null,this.createBoard())}}]),t}(n.a.Component),v=r(3),f=r.n(v),g=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;Object(l.a)(this,e),this.owner=null,this.rents=t||[10,20,40,80],this.garrisons=r||[4,5,6,8],this.upgradePrice=a,this.level=0,this.visitors=[],this.multiplier=1},w=function e(t){Object(l.a)(this,e),this.number=t,this.army=1,this.money=1500,this.territory=[],this.position=0,this.railsOwned=0},E=r(1),q=function(e){function t(e){var r;Object(l.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).newRound=function(e){var t=null===e?"Tie game!":"Player ".concat(e," won!");!1===r.props.isRoomCreator&&r.gameOver?(f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"blue",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),r.turn="1"):r.props.isRoomCreator&&r.gameOver&&f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Continue Playing?",showCancelButton:!0,confirmButtonColor:"blue",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then(function(e){e.value?r.props.pubnub.publish({message:{reset:!0},channel:r.props.gameChannel}):r.props.pubnub.publish({message:{endGame:!0},channel:r.props.gameChannel})})},r.announceWinner=function(e){var t={1:r.state.xScore,2:r.state.oScore};"1"===e?(t[1]+=1,r.setState({xScore:t[1]})):(t[2]+=1,r.setState({oScore:t[2]})),r.gameOver=!0,r.newRound(e)},r.checkForWinner=function(e){},r.newTurn=function(e){if(r.turn=e,document.getElementsByClassName("status-info")[0].innerHTML="".concat(r.turn==r.props.piece?"Your turn":"Opponent's turn"),r.turn==r.props.piece){console.log(r.turn,r.props.piece,"new turn");var t=document.querySelector("button.go");t.addEventListener("click",r.goListener),t.disabled=!1}},r.updateBoard=function(e,t,a,n,s){var o=!0,l=!1,i=void 0;try{for(var c,u=s[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value;E.ToastsStore.success(p,1e4)}}catch(d){l=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}if(r.setState(function(){return{squares:n}}),r.setState(function(){return{players:a}}),"move"==e){var m=document.querySelector("#pawn".concat(t));r.movePawn(t,m,r.state.players[t].position)}},r.checkMonopoly=function(e){var t=r.state.neighbors[e],a=t.splice(0,1),n=r.state.squares[t[0]].owner;if("black"==a){var s=!0,o=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(s=(i=c.next()).done);s=!0){var u=i.value,p=r.state.squares[u];if(p.owner){var m=r.state.players[p.owner[p.owner.length-1]].railsOwned;r.state.squares[u].multiplier=Math.pow(2,m-1)}}}catch(D){o=!0,l=D}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}}else{var d=!0,y=!1,b=void 0;try{for(var h,v=t[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var f=h.value;if(r.state.squares[f].owner!=n){var g=!0,w=!1,E=void 0;try{for(var q,k=t[Symbol.iterator]();!(g=(q=k.next()).done);g=!0){var S=q.value;r.state.squares[S].multiplier=1}}catch(D){w=!0,E=D}finally{try{g||null==k.return||k.return()}finally{if(w)throw E}}}}}catch(D){y=!0,b=D}finally{try{d||null==v.return||v.return()}finally{if(y)throw b}}if("silver"==a){var T=!0,C=!1,P=void 0;try{for(var L,N=t[Symbol.iterator]();!(T=(L=N.next()).done);T=!0){var O=L.value;r.state.squares[O].multiplier=3}}catch(D){C=!0,P=D}finally{try{T||null==N.return||N.return()}finally{if(C)throw P}}}else{var x=!0,j=!1,B=void 0;try{for(var I,R=t[Symbol.iterator]();!(x=(I=R.next()).done);x=!0){var M=I.value;r.state.squares[M].multiplier=2}}catch(D){j=!0,B=D}finally{try{x||null==R.return||R.return()}finally{if(j)throw B}}}}},r.movePawn=function(e,t,a){var n=document.querySelector("#square".concat(a));t.style.left=r.state.leftOffsets[e]+n.offsetLeft+"px",t.style.top=r.state.topOffsets[e]+n.offsetTop+"px"},r.onMove=function(){r.begin=!1;var e=[];if(r.turn===r.props.piece){var t=parseInt(6*Math.random())+1,a=parseInt(6*Math.random())+1,n=r.state.players[r.props.piece],s=r.state.players[r.props.piece].position,o=r.state.players[r.props.piece].position+t+a;if(o>39){n.money=n.money+200;var l="Player ".concat(r.props.piece," passed Start and collected $200!");E.ToastsStore.success(l,1e4),e.push(l)}o%=40;var i=r.state.squares[o];n.position=o;var c=document.querySelector("#pawn".concat(r.props.piece));r.movePawn(r.props.piece,c,o);var u="Player ".concat(r.props.piece," rolled a ").concat(t," and a ").concat(a,", moved from tile #").concat(s," to tile #").concat(o);E.ToastsStore.success(u,1e4),e.push(u);var p=document.querySelector("button.go");if(p.removeEventListener("click",r.goListener),p.disabled=!0,r.state.specials.includes(o)){if(0==o||20==o)console.log("nothing happens");else if([2,7,17,22,33,36].includes(o)){u="Random event: ";var m=parseInt(6*Math.random())+1;1==m?(n.money=n.money-100,u+="Cops! Player ".concat(r.props.piece," lost $100"),n.money<0&&(u+=" and bankrupted!",alert("game over"))):2==m?(n.money=n.money+100,u+="Revenue! Player ".concat(r.props.piece," collected $100!")):3==m?(n.army=n.army-1,u+="Attrition! 1 gangster left player ".concat(r.props.piece,"!"),n.army<0&&(n.army=0,u="Random event: Attrition! Player ".concat(r.props.piece," already has 0 gangster."))):4==m?(n.army=n.army+1,u+="Volunteer! 1 gangster joined player ".concat(r.props.piece,"!")):5==m?(n.money=n.money+150,u+="Revenue! Player ".concat(r.props.piece," collected $150!")):(n.army=n.army+2,u+="Volunteer! 2 gangsters joined player ".concat(r.props.piece,"!")),E.ToastsStore.success(u,1e4),e.push(u)}else if([10,30].includes(o)){u="Player ".concat(r.props.piece," ran into thugs! Winner takes $200!"),E.ToastsStore.success(u,1e4),e.push(u);var d=r.streetFight(n);u="Player ".concat(r.props.piece," threw ").concat(d.attackDices,"! Thugs threw ").concat(d.defendDices),E.ToastsStore.success(u,1e4),e.push(u),u=d.attackTotal>d.defendTotal?"Player ".concat(r.props.piece," victory! Player ").concat(r.props.piece," collected $200!"):"Thugs victory! Player ".concat(r.props.piece," got robbed $200!"),E.ToastsStore.success(u,1e4),e.push(u)}else if(4==o){var y=parseInt(.1*n.money);n.money=n.money-y,u="Player ".concat(r.props.piece," paid 10% tax and lost $").concat(y,"!"),E.ToastsStore.success(u,1e4),e.push(u)}else{var b=parseInt(.2*n.money);n.money=n.money-b,u="Player ".concat(r.props.piece," paid 20% tax and lost $").concat(b,"!"),E.ToastsStore.success(u,1e4),e.push(u)}var h=document.querySelector("button.endTurn");h.addEventListener("click",r.endTurnListener),h.disabled=!1}else if(i.owner)if(i.owner=="player "+r.props.piece){if("silver"!=r.state.provinces[o]&&"black"!=r.state.provinces[o]){var v=document.querySelector("button.upgrade");v.addEventListener("click",r.upgradeListener),v.disabled=!1}var f=document.querySelector("button.recruit");f.addEventListener("click",r.recruitListener),f.disabled=!1;var g=document.querySelector("button.endTurn");g.addEventListener("click",r.endTurnListener),g.disabled=!1}else{var w=document.querySelector("button.pay");w.addEventListener("click",r.payListener),w.disabled=!1;var q=document.querySelector("button.assault");q.addEventListener("click",r.assaultListener),q.disabled=!1}else{var k=document.querySelector("button.purchase");k.addEventListener("click",r.purchaseListener),k.disabled=!1;var S=document.querySelector("button.endTurn");S.addEventListener("click",r.endTurnListener),S.disabled=!1}r.props.pubnub.publish({message:{action:"move",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:e},channel:r.props.gameChannel})}else E.ToastsStore.error("invalid move")},r.onPurchase=function(){var e,t=r.state.players[r.props.piece].position,a=r.state.squares[t],n=[];if(r.turn!=r.props.piece||a.owner)E.ToastsStore.error("invalid move");else{r.state.players[r.props.piece].money<r.state.buyPrices[t]?(e="player "+r.props.piece+" has insufficient money",E.ToastsStore.error(e),n.push(e)):(r.state.players[r.props.piece].money=r.state.players[r.props.piece].money-r.state.buyPrices[t],r.state.players[r.props.piece].territory.push(t),r.state.squares[t].owner="player "+r.props.piece,[5,15,25,35].includes(t)&&(r.state.players[r.props.piece].railsOwned+=1),r.checkMonopoly(t),e="Player ".concat(r.props.piece," purchased tile #").concat(t," for $").concat(r.state.buyPrices[t]),E.ToastsStore.success(e,1e4),n.push(e));var s=document.querySelector("button.purchase"),o=document.querySelector("button.endTurn");s.removeEventListener("click",r.purchaseListener),s.disabled=!0,o.addEventListener("click",r.endTurnListener),o.disabled=!1,r.props.pubnub.publish({message:{action:"purchase",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:n},channel:r.props.gameChannel})}},r.onPay=function(){var e,t=r.state.players[r.props.piece],a=r.state.players[r.props.piece].position,n=r.state.squares[a],s=[];if(r.turn===r.props.piece&&n.owner&&n.owner!="player "+r.props.piece){var o=r.state.players[n.owner[n.owner.length-1]];t.money<n.rents[n.level]?(e="player ".concat(r.props.piece," bankrupts!"),E.ToastsStore.error(e),s.push(e)):(t.money=t.money-n.rents[n.level],o.money=o.money+n.rents[n.level],e="Player ".concat(r.props.piece," paid player ").concat(n.owner[n.owner.length-1]," $").concat(n.rents[n.level]),E.ToastsStore.success(e,1e4),s.push(e));var l=document.querySelector("button.pay"),i=document.querySelector("button.assault"),c=document.querySelector("button.endTurn");i.removeEventListener("click",r.assaultListener),i.disabled=!0,l.removeEventListener("click",r.payListener),l.disabled=!0,c.addEventListener("click",r.endTurnListener),c.disabled=!1,r.props.pubnub.publish({message:{action:"pay",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:s},channel:r.props.gameChannel})}else E.ToastsStore.error("invalid move")},r.onUpgrade=function(){var e,t=r.state.players[r.props.piece].position,a=r.state.squares[t],n=r.state.players[r.props.piece],s=[];if(r.turn===r.props.piece&&a.owner=="player "+r.props.piece){a.level>=4?(e="Tile ".concat(t," is already at max level"),E.ToastsStore.error(e),s.push(e)):n.money<a.upgradePrice?(e="Player ".concat(r.props.piece," has insufficient money"),E.ToastsStore.error(e),s.push(e)):(n.money-=a.upgradePrice,a.level+=1,e="Player ".concat(r.props.piece," updated tile #").concat(t," to level ").concat(a.level),E.ToastsStore.success(e,1e4),s.push(e));var o=document.querySelector("button.upgrade");o.removeEventListener("click",r.upgradeListener),o.disbled=!0,r.props.pubnub.publish({message:{action:"upgrade",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:s},channel:r.props.gameChannel})}else E.ToastsStore.error("invalid move")},r.streetFight=function(e){for(var t=[],r=[],a=0,n=0,s=0;s<e.army;s++){var o=parseInt(6*Math.random())+1;t.push(o),a+=o}for(var l=0;l<e.army;l++){var i=parseInt(6*Math.random())+1;r.push(i),n+=i}return a>n?e.money+=200:e.money-=200,{attackTotal:a,defendTotal:n,attackDices:t,defendDices:r}},r.siege=function(e,t,a){for(var n=r.state.squares[a],s=[],o=[],l=0,i=0,c=0,u=0;u<e.army;u++){var p=parseInt(6*Math.random())+1;s.push(p),l+=p}for(var m=0;m<n.garrisons[n.level];m++){var d=parseInt(6*Math.random())+1;o.push(d),i+=d}if(l>i){n.owner="player "+e.number,e.territory.push(a);var y=!1;for(var b in t.territory)if(t.territory[b]==a){t.territory.splice(b,1),y=!0;break}y||alert("tile not found"),[5,15,25,35].includes(a)&&(e.railsOwned-=1,t.railsOwned-=1),r.checkMonopoly(a)}else c=parseInt(e.army/2),e.army-=c;return{attackTotal:l,defendTotal:i,attackDices:s,defendDices:o,casualty:c}},r.onAssault=function(){var e,t=r.state.players[r.props.piece],a=r.state.players[r.props.piece].position,n=r.state.squares[a],s=[];if(r.turn===r.props.piece&&n.owner&&n.owner!="player "+r.props.piece){var o=r.state.players[n.owner[n.owner.length-1]],l=r.siege(t,o,a);e="{Player ".concat(t.number," attacked with ").concat(t.army," gangsters against ").concat(n.garrisons[n.level]," defenders"),s.push(e),E.ToastsStore.success(e,1e4),e="{Player ".concat(t.number," threw ").concat(l.attackDices.join(", "),", totalling ").concat(l.attackTotal,"}"),s.push(e),E.ToastsStore.success(e,1e4),e="{Player ".concat(o.number," threw ").concat(l.defendDices.join(", "),", totalling ").concat(l.defendTotal,"}"),s.push(e),E.ToastsStore.success(e,1e4);var i=document.querySelector("button.pay"),c=document.querySelector("button.assault"),u=document.querySelector("button.endTurn");l.attackTotal>l.defendTotal?(e="{Tile #".concat(a," now belongs to player ").concat(t.number,"}"),s.push(e),E.ToastsStore.success(e,1e4),c.removeEventListener("click",r.assaultListener),c.disabled=!0,i.removeEventListener("click",r.payListener),i.disabled=!0,u.addEventListener("click",r.endTurnListener),u.disabled=!1):(e="{Player ".concat(t.number," lost ").concat(l.casualty," gangsters}"),s.push(e),E.ToastsStore.success(e,1e4),c.removeEventListener("click",r.assaultListener),c.disabled=!0),r.props.pubnub.publish({message:{action:"assault",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:s},channel:r.props.gameChannel})}else E.ToastsStore.error("invalid move")},r.onRecruit=function(){var e,t=r.state.players[r.props.piece].position,a=r.state.squares[t],n=r.state.players[r.props.piece],s=[];if(r.turn===r.props.piece&&a.owner&&a.owner=="player "+r.props.piece){n.money<r.armyPrice?(e="player "+r.props.piece+" has insufficient money",E.ToastsStore.error(e),s.push(e)):(n.money-=r.armyPrice,n.army+=2,e="Player ".concat(r.props.piece," recruited 2 gangster for $").concat(r.armyPrice),E.ToastsStore.success(e,1e4),s.push(e));var o=document.querySelector("button.recruit");o.removeEventListener("click",r.recruitListener),o.disbled=!0,r.props.pubnub.publish({message:{action:"recruit",turn:r.turn,piece:r.props.piece,players:r.state.players,squares:r.state.squares,toasts:s},channel:r.props.gameChannel})}else E.ToastsStore.error("invalid move")},r.endTurn=function(){r.turn="1"===r.turn?"2":"1";var e=document.querySelector("button.endTurn");e.removeEventListener("click",r.endTurnListener),e.disabled=!0;var t=document.querySelector("button.upgrade");0==t.disabled&&(t.removeEventListener("click",r.upgradeListener),t.disabled=!0);var a=document.querySelector("button.recruit");0==a.disabled&&(a.removeEventListener("click",r.recruitListener),a.disabled=!0);var n=document.querySelector("button.purchase");0==n.disabled&&(n.removeEventListener("click",r.purchaseListener),n.disabled=!0),r.props.pubnub.publish({message:{action:"end turn",piece:r.props.piece,turn:r.turn},channel:r.props.gameChannel})};for(var a=[],n=0;n<40;n++)a.push(new g);return r.state={squares:a,players:[null,new w(1),new w(2)],leftOffsets:[null,20,30,20,30],topOffsets:[null,80,50,50,80],buyPrices:[null,60,null,60,null,200,100,null,100,120,null,140,150,140,160,200,180,null,180,200,null,220,null,220,240,200,260,260,150,280,null,300,300,null,320,200,null,350,null,400],provinces:[null,"brown",null,"brown","null","black","aqua",null,"aqua","aqua",null,"pink","silver","pink","pink","black","orange",null,"orange","orange",null,"red",null,"red","red","black","yellow","yellow","silver","yellow",null,"green","green",null,"green","black",null,"darkblue",null,"darkblue"],specials:[0,2,4,7,10,17,20,22,30,33,36,38],neighbors:{1:["brown",1,3],3:["brown",1,3],6:["aqua",6,8,9],8:["aqua",6,8,9],9:["aqua",6,8,9],11:["pink",11,13,14],13:["pink",11,13,14],14:["pink",11,13,14],16:["orange",16,18,19],18:["orange",16,18,19],19:["orange",16,18,19],21:["red",21,23,24],23:["red",21,23,24],24:["red",21,23,24],26:["yellow",26,27,29],27:["yellow",26,27,29],29:["yellow",26,27,29],31:["green",31,32,34],32:["green",31,32,34],34:["green",31,32,34],37:["darkblue",37,39],39:["darkblue",37,39],12:["silver",12,28],28:["silver",12,28],5:["black",5,15,25,35],15:["black",5,15,25,35],25:["black",5,15,25,35],35:["black",5,15,25,35]}},r.turn="1",r.gameOver=!1,r.counter=0,r.begin=!0,r.armyPrice=200,r.goListener=function(){r.onMove()},r.payListener=function(){r.onPay()},r.purchaseListener=function(){r.onPurchase()},r.endTurnListener=function(){r.endTurn()},r.upgradeListener=function(){r.onUpgrade()},r.assaultListener=function(){r.onAssault()},r.recruitListener=function(){r.onRecruit()},r}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,function(t){console.log("turn ",t.message.turn," player ",e.props.piece),e.turn!=e.props.piece&&("move"==t.message.action?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):["purchase","pay","upgrade","recruit","assault"].includes(t.message.action)?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):"end turn"==t.message.action?e.newTurn(t.message.turn):console.log(t.message))})}},{key:"render",value:function(){var e,t;return console.log("render"),e="".concat(this.props.piece==this.turn?"Your turn":"Opponent's turn"),t=this.props.piece==this.turn&&this.begin&&"1"==this.props.piece?n.a.createElement("button",{className:"go",onClick:this.goListener},"GO!"):n.a.createElement("button",{className:"go",disabled:!0},"GO!"),n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"board"},n.a.createElement(h,{squares:this.state.squares,buyPrices:this.state.buyPrices,provinces:this.state.provinces,specials:this.state.specials})),n.a.createElement("div",{className:"pawn",id:"pawn1"},"player 1"),n.a.createElement("div",{className:"pawn",id:"pawn2"},"player 2"),n.a.createElement("div",{className:"control"},n.a.createElement("p",{className:"status-info"},e),n.a.createElement("div",null,"You are player ",this.props.piece),n.a.createElement(E.ToastsContainer,{store:E.ToastsStore}),t,n.a.createElement("button",{className:"purchase",disabled:!0},"Purchase land"),n.a.createElement("button",{className:"pay",disabled:!0},"Pay rent"),n.a.createElement("button",{className:"upgrade",disabled:!0},"Upgrade land"),n.a.createElement("button",{className:"recruit",disabled:!0},"Recruit gangster"),n.a.createElement("button",{className:"assault",disabled:!0},"Assault property"),n.a.createElement("button",{className:"endTurn",disabled:!0},"End turn"),n.a.createElement("div",{className:"playersInfoWrapper"},n.a.createElement("div",{className:"playersInfo"},"player 1",n.a.createElement("br",null),"territory: ",this.state.players[1].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[1].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[1].army,n.a.createElement("br",null),"money: ",this.state.players[1].money),n.a.createElement("div",{className:"playersInfo"},"player 2",n.a.createElement("br",null),"territory: ",this.state.players[2].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[2].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[2].army,n.a.createElement("br",null),"money: ",this.state.players[2].money,n.a.createElement("br",null)))))}}]),t}(n.a.Component),k=r(16),S=r.n(k),T=r(17),C=r.n(T),P=(r(51),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPressCreate=function(e){r.roomId=C.a.generate().substring(0,5),r.lobbyChannel="tictactoelobby--"+r.roomId,r.pubnub.subscribe({channels:[r.lobbyChannel],withPresence:!0}),f.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friend",text:r.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),r.setState({piece:"1",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},r.onPressJoin=function(e){f.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"blue",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class ",cancelButton:"join-button-class"}}).then(function(e){e.value&&r.joinRoom(e.value)})},r.joinRoom=function(e){r.roomId=e,r.lobbyChannel="tictactoelobby--"+r.roomId,r.pubnub.hereNow({channels:[r.lobbyChannel]}).then(function(e){e.totalOccupancy<2?(r.pubnub.subscribe({channels:[r.lobbyChannel],withPresence:!0}),r.setState({piece:"2"}),r.pubnub.publish({message:{notRoomCreator:!0},channel:r.lobbyChannel})):f.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},r.endGame=function(){r.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),r.lobbyChannel=null,r.gameChannel=null,r.roomId=null,r.pubnub.unsubscribe({channels:[r.lobbyChannel,r.gameChannel]})},r.pubnub=new S.a({publishKey:"pub-c-7ff08bc5-f641-4297-aef9-00f08ecdd561",subscribeKey:"sub-c-a408ea2a-1236-11ea-8755-faba8a6641c7"}),r.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},r.lobbyChannel=null,r.gameChannel=null,r.roomId=null,r.pubnub.init(Object(p.a)(r)),r}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.notRoomCreator&&(e.gameChannel="tictactoegame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),f.a.close())})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"title"},n.a.createElement("p",null,"Mafia wars")),!this.state.isPlaying&&n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"button-container"},n.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),n.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join")),n.a.createElement("div",{className:"board"},n.a.createElement(h,{squares:0,buyPrices:[null,60,null,60,null,200,100,null,100,120,null,140,150,140,160,200,180,null,180,200,null,220,null,220,240,200,260,260,150,280,null,300,300,null,320,200,null,350,null,400],provinces:[null,"brown",null,"brown","null","black","aqua",null,"aqua","aqua",null,"pink","silver","pink","pink","black","orange",null,"orange","orange",null,"red",null,"red","red","black","yellow","yellow","silver","yellow",null,"green","green",null,"green","black",null,"darkblue",null,"darkblue"],specials:[0,2,4,7,10,17,20,22,30,33,36,38]})),n.a.createElement("div",{className:"pawn",id:"pawn1"},"player 1"),n.a.createElement("div",{className:"pawn",id:"pawn2"},"player 2")),this.state.isPlaying&&n.a.createElement(q,{pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,myTurn:this.state.myTurn,xUsername:this.state.xUsername,oUsername:this.state.oUsername,endGame:this.endGame}))}}]),t}(a.Component));o.a.render(n.a.createElement(P,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.acc46d3f.chunk.js.map