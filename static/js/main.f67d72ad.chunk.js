(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},17:function(e,t,a){e.exports=a(53)},23:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(5),l=a.n(s),o=a(4),i=a(6),c=a(8),u=a(7),p=a(3),d=a(9),m=a(2),y=a.n(m),h=(a(14),function(e){var t,a;if(e.special)0==e.num?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)),a=n.a.createElement("b",{className:y()("detail",e.provinceColor)},"Collect $200!")):[2,7,17,22,33,36].includes(e.num)?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",{className:"random"},"?")),a=n.a.createElement("div",{className:y()("detail",e.provinceColor)},n.a.createElement("b",null,"Random events!"),n.a.createElement("br",null))):20==e.num?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)),a=n.a.createElement("b",{className:y()("detail",e.provinceColor)},"Do nothing!")):[10,30].includes(e.num)?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)),a=n.a.createElement("b",{className:y()("detail",e.provinceColor)},"Fight thugs of equal numbers, winning gets you $200, losing cost you $200 (or goes to $0)!")):t=4==e.num?n.a.createElement("div",{className:"face"},n.a.createElement("b",null,"10% tax!")):n.a.createElement("div",{className:"face"},n.a.createElement("b",null,"20% tax!"));else if([5,15,25,35].includes(e.num)){t=n.a.createElement("div",{className:"face"},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),n.a.createElement("b",null,"\ud83d\ude82"),n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null);var r=[];e.multiplier>1?r.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[0]," x",e.multiplier)):r.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[0])),a=n.a.createElement("div",{className:y()("detail",e.provinceColor)},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),n.a.createElement("b",null,"Buy price: "),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),n.a.createElement("div",{className:"sideBySide"},n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"rents: "),r),n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"garrisons: "),n.a.createElement("b",{className:y()("owner",e.playerColor)},e.garrisons[0]))),n.a.createElement("b",null,"Owning 2 railways charges 2x rent, 3 railways 4x rent, 4 railways 8x rent."))}else if([12,28].includes(e.num)){t=n.a.createElement("div",{className:"face"},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null);var s=[];e.multiplier>1?s.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[0]," x",e.multiplier)):s.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[0])),a=n.a.createElement("div",{className:y()("detail",e.provinceColor)},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),n.a.createElement("b",null,"Buy price: "),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),n.a.createElement("div",{className:"sideBySide"},n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"rents: "),s),n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"garrisons: "),n.a.createElement("b",null,e.garrisons[0]))),n.a.createElement("b",null,"Owning both Electric Company and Water Works charges 2x rent."))}else{t=n.a.createElement("div",{className:"face"},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),e.level?"level: "+e.level:null);var l=[],o=[];if(e.rents)for(var i in e.rents)i==e.level?e.multiplier>1?l.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[i]," x",e.multiplier)):l.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},"$",e.rents[i])):l.push(n.a.createElement("b",null,"$",e.rents[i]));if(e.garrisons)for(var c in e.garrisons)c==e.level?o.push(n.a.createElement("b",{className:y()("owner",e.playerColor)},e.garrisons[c])):o.push(n.a.createElement("b",null,e.garrisons[c]));a=n.a.createElement("div",{className:y()("detail",e.provinceColor)},n.a.createElement("b",{className:y()("owner",e.playerColor)},e.name),n.a.createElement("br",null),n.a.createElement("b",null,"Buy price: "),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),n.a.createElement("div",{className:"sideBySide"},n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"rents: "),n.a.createElement("br",null),l),n.a.createElement("div",{className:"column"},n.a.createElement("b",null,"garrisons: "),n.a.createElement("br",null),o)),n.a.createElement("b",null,e.upgradePrice?"upgrade price: "+e.upgradePrice:null),n.a.createElement("b",null,"Owning all lands of same color charges 2x rent."))}return n.a.createElement("div",{className:y()("square",e.styleName,e.provinceColor),id:e.id},t,a)}),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).playerColors=[null,"redText","blueText","purpleText","greenText"],a.playerBorders=[null,"redBorder","blueBorder","purpleBorder","greenBorder"],a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"createBoard",value:function(){var e=[];e.push(n.a.createElement("div",{className:y()("center",this.playerBorders[this.props.piece])}));var t=this.renderSquare(0,"corner");e.push(t);for(var a=[],r=1;r<10;r++)a.push(this.renderSquare(r));e.push(n.a.createElement("div",{className:"row horizontal-row top-row"},a)),t=this.renderSquare(10,"corner"),e.push(t),a=[];for(var s=11;s<20;s++)a.push(this.renderSquare(s));e.push(n.a.createElement("div",{className:"row vertical-row right-row"},a)),t=this.renderSquare(30,"corner"),e.push(t),a=[];for(var l=29;l>20;l--)a.push(this.renderSquare(l));e.push(n.a.createElement("div",{className:"row horizontal-row bottom-row"},a)),t=this.renderSquare(20,"corner"),e.push(t),a=[];for(var o=39;o>30;o--)a.push(this.renderSquare(o));return e.push(n.a.createElement("div",{className:"row vertical-row left-row"},a)),e}},{key:"renderSquare",value:function(e,t){var a="white";if(this.props.squares[e]&&this.props.squares[e].owner){var r=this.props.squares[e].owner;a=this.playerColors[r[r.length-1]]}return n.a.createElement(h,{key:e,id:"square"+e,num:e,name:this.props.squares[e]?this.props.squares[e].name:null,multiplier:this.props.squares[e]?this.props.squares[e].multiplier:1,special:this.props.specials.includes(e),buyPrice:this.props.buyPrices[e],styleName:t,provinceColor:this.props.provinces[e],playerColor:a,owner:this.props.squares[e]?this.props.squares[e].owner:null,rents:this.props.squares[e]?this.props.squares[e].rents:null,garrisons:this.props.squares[e]?this.props.squares[e].garrisons:null,upgradePrice:this.props.squares[e]?this.props.squares[e].upgradePrice:null,level:this.props.squares[e]?this.props.squares[e].level:null,visitors:this.props.squares[e]?this.props.squares[e].visitors:null})}},{key:"render",value:function(){return n.a.createElement("div",{onClick:this.showDetail},this.createBoard())}}]),t}(n.a.Component),v=(a(23),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dealMoney1:a.props.dealMoney1,dealMoney2:a.props.dealMoney2},a.money1SliderHandler=a.money1SliderHandler.bind(Object(p.a)(a)),a.money2SliderHandler=a.money2SliderHandler.bind(Object(p.a)(a)),a.propose=a.propose.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.counter=a.counter.bind(Object(p.a)(a)),a.accept=a.accept.bind(Object(p.a)(a)),a.decline=a.decline.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"propose",value:function(){for(var e=[],t=0,a=Array.from(document.getElementsByClassName("tileCheckBox"));t<a.length;t++){var r=a[t];r.checked&&e.push(r.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:this.state.dealMoney1,money2:this.state.dealMoney2,tiles:e,action:"propose"})}},{key:"counter",value:function(){for(var e=[],t=0,a=Array.from(document.getElementsByClassName("tileCheckBox"));t<a.length;t++){var r=a[t];r.checked&&e.push(r.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:this.state.dealMoney1,money2:this.state.dealMoney2,tiles:e,action:"counter"})}},{key:"decline",value:function(){this.props.submit({action:"decline"})}},{key:"accept",value:function(){for(var e=document.querySelector("#money1").value,t=document.querySelector("#money2").value,a=[],r=0,n=Array.from(document.getElementsByClassName("tileCheckBox"));r<n.length;r++){var s=n[r];s.checked&&a.push(s.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:e,money2:t,tiles:a,action:"accept"})}},{key:"cancel",value:function(){this.props.submit({action:"cancel"})}},{key:"money1SliderHandler",value:function(e){this.setState({dealMoney1:e.target.value})}},{key:"money2SliderHandler",value:function(e){this.setState({dealMoney2:e.target.value})}},{key:"render",value:function(){var e,t=[],a=[];if(this.props.piece==this.props.trader1&&"propose"==this.props.phase){var r=!0,s=!1,l=void 0;try{for(var o,i=this.props.territory1[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value,u=this.props.squares[c];t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:u.num})," ",u.name))}}catch(le){s=!0,l=le}finally{try{r||null==i.return||i.return()}finally{if(s)throw l}}var p=!0,d=!1,m=void 0;try{for(var y,h=this.props.territory2[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var b=y.value,v=this.props.squares[b];a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:v.num})," ",v.name))}}catch(le){d=!0,m=le}finally{try{p||null==h.return||h.return()}finally{if(d)throw m}}e=n.a.createElement("div",{className:"tradeWrapper"},n.a.createElement("div",{className:"tradeInfo"},n.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",onChange:this.money1SliderHandler}),n.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),t),n.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",onChange:this.money2SliderHandler}),n.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),a)),n.a.createElement("button",{onClick:this.propose},"Propose"),n.a.createElement("button",{onClick:this.cancel},"Cancel"))}else if(this.props.piece==this.props.trader2&&"counter"==this.props.phase){var E=!0,f=!1,g=void 0;try{for(var w,k=this.props.territory1[Symbol.iterator]();!(E=(w=k.next()).done);E=!0){var S=w.value,C=this.props.squares[S];this.props.dealTiles.includes(C.num.toString())?t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:C.num,checked:!0})," ",C.name)):t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:C.num})," ",C.name))}}catch(le){f=!0,g=le}finally{try{E||null==k.return||k.return()}finally{if(f)throw g}}var q=!0,N=!1,T=void 0;try{for(var L,x=this.props.territory2[Symbol.iterator]();!(q=(L=x.next()).done);q=!0){var P=L.value,M=this.props.squares[P];this.props.dealTiles.includes(M.num.toString())?a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:M.num,checked:!0})," ",M.name)):a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:M.num})," ",M.name))}}catch(le){N=!0,T=le}finally{try{q||null==x.return||x.return()}finally{if(N)throw T}}e=n.a.createElement("div",{className:"tradeWrapper"},n.a.createElement("div",{className:"tradeInfo"},n.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",onChange:this.money1SliderHandler}),n.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),t),n.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",onChange:this.money2SliderHandler}),n.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),a)),n.a.createElement("button",{onClick:this.accept},"Accept"),n.a.createElement("button",{onClick:this.counter},"Propose"),n.a.createElement("button",{onClick:this.decline},"Decline"))}else if(this.props.piece==this.props.trader1&&"confirm"==this.props.phase){var O=!0,I=!1,B=void 0;try{for(var $,j=this.props.territory1[Symbol.iterator]();!(O=($=j.next()).done);O=!0){var A=$.value,R=this.props.squares[A];this.props.dealTiles.includes(R.num.toString())?t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:R.num,checked:!0,disabled:!0})," ",R.name)):t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:R.num,disabled:!0})," ",R.name))}}catch(le){I=!0,B=le}finally{try{O||null==j.return||j.return()}finally{if(I)throw B}}var D=!0,W=!1,H=void 0;try{for(var V,G=this.props.territory2[Symbol.iterator]();!(D=(V=G.next()).done);D=!0){var Y=V.value,F=this.props.squares[Y];this.props.dealTiles.includes(F.num.toString())?a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:F.num,checked:!0,disabled:!0})," ",F.name)):a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:F.num,disabled:!0})," ",F.name))}}catch(le){W=!0,H=le}finally{try{D||null==G.return||G.return()}finally{if(W)throw H}}e=n.a.createElement("div",{className:"tradeWrapper"},n.a.createElement("div",{className:"tradeInfo"},n.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",disabled:!0}),n.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),t),n.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",disabled:!0}),n.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),a)),n.a.createElement("button",{onClick:this.accept},"Accept"),n.a.createElement("button",{onClick:this.decline},"Decline"))}else{var J=!0,U=!1,K=void 0;try{for(var z,Q=this.props.territory1[Symbol.iterator]();!(J=(z=Q.next()).done);J=!0){var X=z.value,Z=this.props.squares[X];this.props.dealTiles.includes(Z.num.toString())?t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:Z.num,checked:!0,disabled:!0})," ",Z.name)):t.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:Z.num,disabled:!0})," ",Z.name))}}catch(le){U=!0,K=le}finally{try{J||null==Q.return||Q.return()}finally{if(U)throw K}}var _=!0,ee=!1,te=void 0;try{for(var ae,re=this.props.territory2[Symbol.iterator]();!(_=(ae=re.next()).done);_=!0){var ne=ae.value,se=this.props.squares[ne];this.props.dealTiles.includes(se.num.toString())?a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:se.num,checked:!0,disabled:!0})," ",se.name)):a.push(n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:se.num,disabled:!0})," ",se.name))}}catch(le){ee=!0,te=le}finally{try{_||null==re.return||re.return()}finally{if(ee)throw te}}e=n.a.createElement("div",{className:"tradeWrapper"},n.a.createElement("div",{className:"tradeInfo"},n.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",disabled:!0}),n.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),t),n.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",n.a.createElement("br",null),n.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",disabled:!0}),n.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),a)))}return n.a.createElement("div",null,e)}}]),t}(n.a.Component)),E=a(11),f=a.n(E),g=function e(t,a,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;Object(o.a)(this,e),this.num=t,this.name=a,this.owner=null,this.rents=r||[10,20,40,80],this.garrisons=n||[4,5,6,8],this.upgradePrice=s,this.level=0,this.multiplier=1},w=function e(t){Object(o.a)(this,e),this.number=t,this.army=1,this.money=1500,this.territory=[],this.position=0,this.railsOwned=0},k=a(1),S=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).checkForWinner=function(e){var t;if(e&&"bankrupt"==e){var r=0,n=!0,s=!1,l=void 0;try{for(var o,i=a.state.players[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c&&(c.money>0&&(r=a.player.number))}}catch(b){s=!0,l=b}finally{try{n||null==i.return||i.return()}finally{if(s)throw l}}t="A player has bankrupted! Player ".concat(r," has won!"),!0,a.props.pubnub.publish({message:{action:"victory",toasts:[t]},channel:a.props.gameChannel})}else{var u=!0,p=!1,d=void 0;try{for(var m,y=a.state.players[Symbol.iterator]();!(u=(m=y.next()).done);u=!0){var h=m.value;if(h&&h.money>=a.winCondition.money){t="Player ".concat(h.number," has reached monetory victory by reaching $").concat(a.winCondition.money,"!"),!0,a.props.pubnub.publish({message:{action:"victory",toasts:[t]},channel:a.props.gameChannel});break}}}catch(b){p=!0,d=b}finally{try{u||null==y.return||y.return()}finally{if(p)throw d}}console.log("no victory reached")}},a.updateChat=function(e){var t=document.querySelector("#chats");t.value="".concat(e)+"\n"+t.value},a.newTurn=function(e){console.log("Player "+e+"'s new turn!"),a.turn=e;var t=document.getElementsByClassName("status-info")[0];t.innerHTML="Player "+a.turn+"'s turn";var r=document.querySelector("#tradePanel");if(0!=r.children.length&&l.a.unmountComponentAtNode(r),a.turn==a.props.piece){k.ToastsStore.warning("Your turn!",4e3),t.innerHTML="Your turn!";var n=document.querySelector("button.go");n.addEventListener("click",a.goListener),n.disabled=!1}},a.updateBoard=function(e,t,r,s,o,i){var c=!0,u=!1,p=void 0;try{for(var d,m=o[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var y=d.value;k.ToastsStore.success(y,4e3)}}catch(E){u=!0,p=E}finally{try{c||null==m.return||m.return()}finally{if(u)throw p}}a.setState(function(){return{squares:s}}),a.setState(function(){return{players:r}});var h=document.querySelector("#tradePanel");if("endTrade"==e?(a.setState(function(){return{deal:i}}),0!=h.children.length&&l.a.unmountComponentAtNode(h)):i&&(a.setState(function(){return{deal:i}}),"propose"==a.state.deal.phase?a.state.deal.trader1.number==a.props.piece&&l.a.render(n.a.createElement(v,{phase:a.state.deal.phase,piece:a.props.piece,turn:a.turn,trader1:a.state.deal.trader1.number,trader2:a.state.deal.trader2.number,maxMoney1:a.state.deal.trader1.money,maxMoney2:a.state.deal.trader2.money,dealMoney1:a.state.deal.money1,dealMoney2:a.state.deal.money2,territory1:a.state.deal.trader1.territory,territory2:a.state.deal.trader2.territory,dealTiles:a.state.deal.tiles,squares:a.state.squares,submit:a.submit}),h):(0!=h.children.length&&l.a.unmountComponentAtNode(h),l.a.render(n.a.createElement(v,{phase:a.state.deal.phase,piece:a.props.piece,turn:a.turn,trader1:a.state.deal.trader1.number,trader2:a.state.deal.trader2.number,maxMoney1:a.state.deal.trader1.money,maxMoney2:a.state.deal.trader2.money,dealMoney1:a.state.deal.money1,dealMoney2:a.state.deal.money2,territory1:a.state.deal.trader1.territory,territory2:a.state.deal.trader2.territory,dealTiles:a.state.deal.tiles,squares:a.state.squares,submit:a.submit}),h))),"move"==e){var b=document.querySelector("#pawn".concat(t));a.movePawn(t,b,a.state.players[t].position)}},a.checkMonopoly=function(e){var t=a.state.neighbors[e],r=a.state.squares[t[0]].owner;if([5,15,25,35].includes(parseInt(e))){var n=!0,s=!1,l=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,u=a.state.squares[c];if(u.owner){var p=a.state.players[u.owner[u.owner.length-1]].railsOwned;a.state.squares[c].multiplier=Math.pow(2,p-1)}}}catch(M){s=!0,l=M}finally{try{n||null==i.return||i.return()}finally{if(s)throw l}}}else{var d=!0,m=!0,y=!1,h=void 0;try{for(var b,v=t[Symbol.iterator]();!(m=(b=v.next()).done);m=!0){var E=b.value;if(a.state.squares[E].owner!=r){d=!1;break}}}catch(M){y=!0,h=M}finally{try{m||null==v.return||v.return()}finally{if(y)throw h}}if(d){var f=!0,g=!1,w=void 0;try{for(var k,S=t[Symbol.iterator]();!(f=(k=S.next()).done);f=!0){var C=k.value;a.state.squares[C].multiplier=2}}catch(M){g=!0,w=M}finally{try{f||null==S.return||S.return()}finally{if(g)throw w}}}else{var q=!0,N=!1,T=void 0;try{for(var L,x=t[Symbol.iterator]();!(q=(L=x.next()).done);q=!0){var P=L.value;a.state.squares[P].multiplier=1}}catch(M){N=!0,T=M}finally{try{q||null==x.return||x.return()}finally{if(N)throw T}}}}},a.movePawn=function(e,t,r){var n=document.querySelector("#square".concat(r));t.style.left="calc("+a.state.leftOffsets[e]+"vmin + "+n.offsetLeft+"px)",t.style.top="calc("+a.state.topOffsets[e]+"vmin + "+n.offsetTop+"px)"},a.onMove=function(){a.begin=!1;var e=[];if(a.turn===a.props.piece){var t=parseInt(6*Math.random())+1,r=parseInt(6*Math.random())+1,n=a.state.players[a.props.piece],s=(a.state.players[a.props.piece].position,a.state.players[a.props.piece].position+t+r);if(s>39){n.money=n.money+200;var l="Player ".concat(a.props.piece," passed Start and collected $200!");k.ToastsStore.success(l,4e3),e.push(l)}s%=40;var o=a.state.squares[s];n.position=s;var i=document.querySelector("#pawn".concat(a.props.piece));a.movePawn(a.props.piece,i,s);var c="Player ".concat(a.props.piece," rolled a ").concat(t," and a ").concat(r,", moved to ").concat(a.state.squares[s].name);k.ToastsStore.success(c,4e3),e.push(c);var u=document.querySelector("button.go");u.removeEventListener("click",a.goListener),u.disabled=!0;var p=document.querySelector("button.trade1");1==p.disabled&&(p.addEventListener("click",a.tradeListener1),p.disabled=!1);var d=document.querySelector("button.trade2");1==d.disabled&&(d.addEventListener("click",a.tradeListener2),d.disabled=!1);var m=document.querySelector("button.trade3");1==m.disabled&&(m.addEventListener("click",a.tradeListener3),m.disabled=!1);var y=document.querySelector("button.trade4");if(1==y.disabled&&(y.addEventListener("click",a.tradeListener4),y.disabled=!1),a.state.specials.includes(s)){var h=!1;if(0==s||20==s)console.log("nothing happens");else if([2,7,17,22,33,36].includes(s)){c="Random event: ";var b=parseInt(6*Math.random())+1;1==b?(n.money=n.money-100,c+="Cops! Player ".concat(a.props.piece," lost $100"),n.money<0&&(n.money-=100)):2==b?(n.money=n.money+100,c+="Revenue! Player ".concat(a.props.piece," collected $100!")):3==b?(n.army=n.army-1,c+="Attrition! 1 gangster left player ".concat(a.props.piece,"!"),n.army<0&&(n.army=0,c="Random event: Attrition! Player ".concat(a.props.piece," already has 0 gangster."))):4==b?(n.army=n.army+1,c+="Volunteer! 1 gangster joined player ".concat(a.props.piece,"!")):5==b?(h=!0,c+="Player ".concat(a.props.piece," rolled again!")):(n.army=n.army+2,c+="Volunteer! 2 gangsters joined player ".concat(a.props.piece,"!")),k.ToastsStore.success(c,4e3),e.push(c)}else if([10,30].includes(s)){c="Player ".concat(a.props.piece," ran into thugs! Winner takes $200!"),k.ToastsStore.success(c,4e3),e.push(c);var v=a.streetFight(n);c="Player ".concat(a.props.piece," threw :").concat(v.attackDices,"! Thugs threw :").concat(v.defendDices),k.ToastsStore.success(c,4e3),e.push(c),v.attackTotal>v.defendTotal?(n.money+=200,c="Player ".concat(a.props.piece," victory! Player ").concat(a.props.piece," collected $200!")):(c="Thugs victory! Player ".concat(a.props.piece," got robbed $200!"),n.money-=200,n.money<0&&(n.money=0)),k.ToastsStore.success(c,4e3),e.push(c)}else if(4==s){var E=parseInt(.1*n.money);n.money=n.money-E,c="Player ".concat(a.props.piece," paid 10% tax and lost $").concat(E,"!"),k.ToastsStore.success(c,4e3),e.push(c)}else{var f=parseInt(.2*n.money);n.money=n.money-f,c="Player ".concat(a.props.piece," paid 20% tax and lost $").concat(f,"!"),k.ToastsStore.success(c,4e3),e.push(c)}if(h){var g=document.querySelector("button.go");g.addEventListener("click",a.goListener),g.disabled=!1}else{var w=document.querySelector("button.endTurn");w.addEventListener("click",a.endTurnListener),w.disabled=!1}}else if(o.owner)if(o.owner=="player "+a.props.piece){if("silver"!=a.state.provinces[s]&&"black"!=a.state.provinces[s]){var S=document.querySelector("button.upgrade");S.addEventListener("click",a.upgradeListener),S.disabled=!1}var C=document.querySelector("button.recruit");C.addEventListener("click",a.recruitListener),C.disabled=!1;var q=document.querySelector("button.endTurn");q.addEventListener("click",a.endTurnListener),q.disabled=!1}else{var N=document.querySelector("button.pay");N.addEventListener("click",a.payListener),N.disabled=!1;var T=document.querySelector("button.assault");T.addEventListener("click",a.assaultListener),T.disabled=!1,a.disableTrade()}else{var L=document.querySelector("button.purchase");L.addEventListener("click",a.purchaseListener),L.disabled=!1;var x=document.querySelector("button.endTurn");x.addEventListener("click",a.endTurnListener),x.disabled=!1}a.props.pubnub.publish({message:{action:"move",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:e},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.onPurchase=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=[];if(a.turn!=a.props.piece||r.owner)k.ToastsStore.error("invalid move");else{a.state.players[a.props.piece].money<a.state.buyPrices[t]?(e="player "+a.props.piece+" has insufficient money",k.ToastsStore.error(e),n.push(e)):(a.state.players[a.props.piece].money=a.state.players[a.props.piece].money-a.state.buyPrices[t],a.state.players[a.props.piece].territory.push(t),a.state.squares[t].owner="player "+a.props.piece,[5,15,25,35].includes(t)&&(a.state.players[a.props.piece].railsOwned+=1),a.checkMonopoly(t),e="Player ".concat(a.props.piece," purchased tile ").concat(a.state.squares[t].name," for $").concat(a.state.buyPrices[t]),k.ToastsStore.success(e,4e3),n.push(e));var s=document.querySelector("button.purchase");s.removeEventListener("click",a.purchaseListener),s.disabled=!0,a.props.pubnub.publish({message:{action:"purchase",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:n},channel:a.props.gameChannel})}},a.onPay=function(){var e,t=a.state.players[a.props.piece],r=a.state.players[a.props.piece].position,n=a.state.squares[r],s=[];if(a.turn===a.props.piece&&n.owner&&n.owner!="player "+a.props.piece){var l=a.state.players[n.owner[n.owner.length-1]];t.money<n.rents[n.level]*n.multiplier?(e="player ".concat(a.props.piece," bankrupts!"),k.ToastsStore.error(e),s.push(e),a.checkForWinner("bankrupt")):(t.money=t.money-n.rents[n.level]*n.multiplier,l.money=l.money+n.rents[n.level]*n.multiplier,e="Player ".concat(a.props.piece," paid player ").concat(n.owner[n.owner.length-1]," $").concat(n.rents[n.level]*n.multiplier),k.ToastsStore.success(e,4e3),s.push(e));var o=document.querySelector("button.pay"),i=document.querySelector("button.assault"),c=document.querySelector("button.endTurn");i.removeEventListener("click",a.assaultListener),i.disabled=!0,o.removeEventListener("click",a.payListener),o.disabled=!0,c.addEventListener("click",a.endTurnListener),c.disabled=!1;var u=document.querySelector("button.trade1");1==u.disabled&&(u.addEventListener("click",a.tradeListener1),u.disabled=!1);var p=document.querySelector("button.trade2");1==p.disabled&&(p.addEventListener("click",a.tradeListener2),p.disabled=!1);var d=document.querySelector("button.trade3");1==d.disabled&&(d.addEventListener("click",a.tradeListener3),d.disabled=!1);var m=document.querySelector("button.trade4");1==m.disabled&&(m.addEventListener("click",a.tradeListener4),m.disabled=!1),a.props.pubnub.publish({message:{action:"pay",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.onUpgrade=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=a.state.players[a.props.piece],s=[];if(a.turn===a.props.piece&&r.owner=="player "+a.props.piece){r.level>=6?(e="Tile ".concat(t," is already at max level"),k.ToastsStore.error(e),s.push(e)):n.money<r.upgradePrice?(e="Player ".concat(a.props.piece," has insufficient money"),k.ToastsStore.error(e),s.push(e)):(n.money-=r.upgradePrice,r.level+=1,e="Player ".concat(a.props.piece," updated ").concat(a.state.squares[t].name," to level ").concat(r.level),k.ToastsStore.success(e,4e3),s.push(e));var l=document.querySelector("button.upgrade");l.removeEventListener("click",a.upgradeListener),l.disbled=!0,a.props.pubnub.publish({message:{action:"upgrade",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.streetFight=function(e){for(var t=[],a=[],r=0,n=0,s=0;s<e.army;s++){var l=parseInt(6*Math.random())+1;t.push(l),r+=l}for(var o=0;o<e.army;o++){var i=parseInt(6*Math.random())+1;a.push(i),n+=i}return{attackTotal:r,defendTotal:n,attackDices:t,defendDices:a}},a.siege=function(e,t,r){for(var n=a.state.squares[r],s=[],l=[],o=0,i=0,c=0;c<e.army;c++){var u=parseInt(6*Math.random())+1;s.push(u),o+=u}for(var p=0;p<n.garrisons[n.level];p++){var d=parseInt(6*Math.random())+1;l.push(d),i+=d}return{attackTotal:o,defendTotal:i,attackDices:s,defendDices:l}},a.onAssault=function(){var e,t=a.state.players[a.props.piece],r=a.state.players[a.props.piece].position,n=a.state.squares[r],s=(a.state.players[n.owner[n.owner.length-1]],[]);if(a.turn===a.props.piece&&n.owner&&n.owner!="player "+a.props.piece){var l=a.state.players[n.owner[n.owner.length-1]],o=a.siege(t,l,r);e="{Player ".concat(t.number," attacked with x").concat(t.army," gangsters against x").concat(n.garrisons[n.level]," defenders"),s.push(e),k.ToastsStore.success(e,4e3),e="{Player ".concat(t.number," threw :").concat(o.attackDices.join(", "),", totalling ").concat(o.attackTotal,"}"),s.push(e),k.ToastsStore.success(e,4e3),e="{Player ".concat(l.number," threw :").concat(o.defendDices.join(", "),", totalling ").concat(o.defendTotal,"}"),s.push(e),k.ToastsStore.success(e,4e3);var i=document.querySelector("button.pay"),c=document.querySelector("button.assault"),u=document.querySelector("button.endTurn"),p=parseInt(t.army/2);if(o.attackTotal>o.defendTotal){n.owner="player "+t.number,t.territory.push(r);var d=!1;for(var m in l.territory)if(l.territory[m]==r){l.territory.splice(m,1),d=!0;break}d||alert("tile not found"),[5,15,25,35].includes(r)&&(t.railsOwned+=1,l.railsOwned-=1),a.checkMonopoly(r),t.army-=p,e="{Tile ".concat(a.state.squares[r].name," now belongs to player ").concat(t.number,"}"),s.push(e),k.ToastsStore.success(e,4e3),i.removeEventListener("click",a.payListener),i.disabled=!0,u.addEventListener("click",a.endTurnListener),u.disabled=!1}c.removeEventListener("click",a.assaultListener),c.disabled=!0,e="{Player ".concat(t.number," lost ").concat(p," gangsters}"),s.push(e),k.ToastsStore.success(e,4e3),c.removeEventListener("click",a.assaultListener),c.disabled=!0;var y=document.querySelector("button.trade1");1==y.disabled&&(y.addEventListener("click",a.tradeListener1),y.disabled=!1);var h=document.querySelector("button.trade2");1==h.disabled&&(h.addEventListener("click",a.tradeListener2),h.disabled=!1);var b=document.querySelector("button.trade3");1==b.disabled&&(b.addEventListener("click",a.tradeListener3),b.disabled=!1);var v=document.querySelector("button.trade4");1==v.disabled&&(v.addEventListener("click",a.tradeListener4),v.disabled=!1),a.props.pubnub.publish({message:{action:"assault",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.onRecruit=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=a.state.players[a.props.piece],s=[];if(a.turn===a.props.piece&&r.owner&&r.owner=="player "+a.props.piece){n.money<a.armyPrice?(e="player "+a.props.piece+" has insufficient money",k.ToastsStore.error(e),s.push(e)):(n.money-=a.armyPrice,n.army+=1,e="Player ".concat(a.props.piece," recruited 1 gangster for $").concat(a.armyPrice),k.ToastsStore.success(e,4e3),s.push(e));var l=document.querySelector("button.recruit");l.removeEventListener("click",a.recruitListener),l.disbled=!0,a.props.pubnub.publish({message:{action:"recruit",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.submit=function(e){var t,r=[];t="".concat(e.action),r.push(t),k.ToastsStore.success(t,4e3);var n="trade";a.state.deal.trader1=a.state.players[e.trader1],a.state.deal.trader2=a.state.players[e.trader2],a.state.deal.money1=e.money1,a.state.deal.money2=e.money2,a.state.deal.tiles=e.tiles;var s=document.querySelector("#tradePanel");if("propose"==e.action)a.state.deal.phase="counter";else if("counter"==e.action)a.state.deal.phase="confirm";else if("accept"==e.action){n="endTrade",0!=s.children.length&&l.a.unmountComponentAtNode(s),a.state.players[e.trader1].money-=parseInt(e.money1),a.state.players[e.trader2].money-=parseInt(e.money2),a.state.players[e.trader1].money+=parseInt(e.money2),a.state.players[e.trader2].money+=parseInt(e.money1);var o=!0,i=!1,c=void 0;try{for(var u,p=e.tiles[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){var d=u.value,m=!1;for(var y in a.state.deal.trader1.territory){var h=a.state.deal.trader1.territory[y];if(h==d){a.state.squares[d].owner="player "+a.state.deal.trader2.number,a.state.deal.trader1.territory.splice(y,1),a.state.deal.trader2.territory.push(h),[5,15,25,35].includes(parseInt(d))&&(a.state.deal.trader1.railsOwned-=1,a.state.deal.trader2.railsOwned+=1),m=!0;break}}if(!m)for(var b in a.state.deal.trader2.territory){var v=a.state.deal.trader2.territory[b];if(v==d){a.state.squares[d].owner="player "+a.state.deal.trader1.number,a.state.deal.trader2.territory.splice(b,1),a.state.deal.trader1.territory.push(v),[5,15,25,35].includes(parseInt(d))&&(a.state.deal.trader1.railsOwned+=1,a.state.deal.trader2.railsOwned-=1);break}}a.checkMonopoly(d)}}catch(E){i=!0,c=E}finally{try{o||null==p.return||p.return()}finally{if(i)throw c}}a.state.deal.trader1=new w(0),a.state.deal.trader2=new w(0),a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.tiles=[]}else"decline"!=e.action&&"cancel"!=e.action||(n="endTrade",0!=s.children.length&&l.a.unmountComponentAtNode(s),a.state.deal.trader1=new w(0),a.state.deal.trader2=new w(0),a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.tiles=[]);a.props.pubnub.publish({message:{action:n,turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:r,deal:a.state.deal},channel:a.props.gameChannel})},a.disableTrade=function(){var e=document.querySelector("button.trade1");0==e.disabled&&(e.removeEventListener("click",a.tradeListener1),e.disabled=!0);var t=document.querySelector("button.trade2");0==t.disabled&&(t.removeEventListener("click",a.tradeListener2),t.disabled=!0);var r=document.querySelector("button.trade3");0==r.disabled&&(r.removeEventListener("click",a.tradeListener3),r.disabled=!0);var n=document.querySelector("button.trade4");0==n.disabled&&(n.removeEventListener("click",a.tradeListener4),n.disabled=!0)},a.onTrade=function(e){var t,r=[];if(e!=a.props.piece){t="Player "+a.props.piece+" initiated a trade propose to player "+e,k.ToastsStore.success(t,4e3),r.push(t),a.disableTrade();var n=document.querySelector("button.upgrade");0==n.disabled&&(n.removeEventListener("click",a.upgradeListener),n.disabled=!0);var s=document.querySelector("button.recruit");0==s.disabled&&(s.removeEventListener("click",a.recruitListener),s.disabled=!0);var l=document.querySelector("button.purchase");0==l.disabled&&(l.removeEventListener("click",a.purchaseListener),l.disabled=!0),a.state.deal.trader1=a.state.players[a.props.piece],a.state.deal.trader2=a.state.players[e],a.state.deal.phase="propose",a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.tiles=[],a.props.pubnub.publish({message:{action:"trade",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:r,deal:a.state.deal},channel:a.props.gameChannel})}else k.ToastsStore.error("invalid move")},a.endTurn=function(){a.props.pubnub.hereNow({channels:["mafiaLobby--"+a.props.roomId]}).then(function(e){a.turn=(parseInt(a.turn)+1).toString(),parseInt(a.turn)>e.totalOccupancy&&(a.turn="1");var t=document.querySelector("button.endTurn");t.removeEventListener("click",a.endTurnListener),t.disabled=!0;var r=document.querySelector("button.upgrade");0==r.disabled&&(r.removeEventListener("click",a.upgradeListener),r.disabled=!0);var n=document.querySelector("button.recruit");0==n.disabled&&(n.removeEventListener("click",a.recruitListener),n.disabled=!0);var s=document.querySelector("button.purchase");0==s.disabled&&(s.removeEventListener("click",a.purchaseListener),s.disabled=!0),a.disableTrade();var o=document.querySelector("#tradePanel");0!=o.children.length&&l.a.unmountComponentAtNode(o),a.props.pubnub.publish({message:{action:"end turn",piece:a.props.piece,turn:a.turn},channel:a.props.gameChannel}),a.checkForWinner()})},a.sendChat=function(){var e=document.querySelector("#chatInput"),t="Player ".concat(a.props.piece,": ").concat(e.value);e.value="",a.props.pubnub.publish({message:{action:"chat",chat:t},channel:a.props.gameChannel})};var r=[],s=0;return r.push(new g(s++,"Start",null,null,null)),r.push(new g(s++,"Mediterranean Ave",[2,10,30,90,160,250],[3,3,4,5,6,8],50)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Baltic Ave",[4,20,60,180,320,450],[3,3,4,5,6,8],50)),r.push(new g(s++,"tax",null,null,null)),r.push(new g(s++,"Reading Railroad",[25],[7],50)),r.push(new g(s++,"Oriental Ave",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Vermont Ave",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new g(s++,"Conneticut Ave",[8,40,100,300,450,600],[3,3,4,5,6,8],50)),r.push(new g(s++,"Street thugs",null,null,null)),r.push(new g(s++,"St.Charles Place",[10,50,150,450,625,750],[3,3,4,5,6,8],50)),r.push(new g(s++,"Electric Company",[100],[5],50)),r.push(new g(s++,"States Ave",[10,20,50,150,450,625,750],[3,3,4,5,6,8],100)),r.push(new g(s++,"Virginia Ave",[12,60,180,500,700,900],[3,3,4,5,6,8],100)),r.push(new g(s++,"Pennsylvania Railroad",[25],[7],50)),r.push(new g(s++,"St.James Place",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Tennesee Ave",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new g(s++,"New York Ave",[16,80,220,600,800,1e3],[3,3,4,5,6,8],100)),r.push(new g(s++,"Free Stay",null,null,null)),r.push(new g(s++,"Kentucky Ave",[18,36,90,250,700,875],[4,4,5,6,7,8],150)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Indiana Ave",[18,90,250,700,875,1050],[4,4,5,6,7,8],150)),r.push(new g(s++,"Illinois Ave",[20,100,300,750,925,1100],[4,4,5,6,7,8],150)),r.push(new g(s++,"B & O Railroad",[25],[7],50)),r.push(new g(s++,"Atlantic Ave",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new g(s++,"Ventnor Ave",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new g(s++,"Water Works",[100],[5],null)),r.push(new g(s++,"Marvin Gardens",[24,48,120,360,850,1025,1200],[4,4,5,6,7,8],150)),r.push(new g(s++,"Street thugs",null,null,null)),r.push(new g(s++,"Pacific Ave",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new g(s++,"North Carolina Ave",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Pennsylvania Ave",[28,150,450,1e3,1200,1400],[5,5,6,6,7,9],200)),r.push(new g(s++,"Short Line Railroad",[25],[7],50)),r.push(new g(s++,"?",null,null,null)),r.push(new g(s++,"Park Place",[35,175,500,1100,1300,1500],[6,6,7,7,9,10],200)),r.push(new g(s++,"tax",null,null,null)),r.push(new g(s++,"Broad Walk",[50,200,600,1400,1700,2e3],[6,6,7,7,9,10],200)),a.state={squares:r,players:[new w(0),new w(1),new w(2),new w(3),new w(4)],leftOffsets:[null,0,3,2,0],topOffsets:[null,1,3,5,7],buyPrices:[null,60,null,60,null,200,100,null,100,120,null,140,150,140,160,200,180,null,180,200,null,220,null,220,240,200,260,260,150,280,null,300,300,null,320,200,null,350,null,400],provinces:[null,"brown",null,"brown","null","black","aqua",null,"aqua","aqua",null,"pink","silver","pink","pink","black","orange",null,"orange","orange",null,"red",null,"red","red","black","yellow","yellow","silver","yellow",null,"green","green",null,"green","black",null,"darkblue",null,"darkblue"],specials:[0,2,4,7,10,17,20,22,30,33,36,38],neighbors:{1:[1,3],3:[1,3],6:[6,8,9],8:[6,8,9],9:[6,8,9],11:[11,13,14],13:[11,13,14],14:[11,13,14],16:[16,18,19],18:[16,18,19],19:[16,18,19],21:[21,23,24],23:[21,23,24],24:[21,23,24],26:[26,27,29],27:[26,27,29],29:[26,27,29],31:[31,32,34],32:[31,32,34],34:[31,32,34],37:[37,39],39:[37,39],12:[12,28],28:[12,28],5:[5,15,25,35],15:[5,15,25,35],25:[5,15,25,35],35:[5,15,25,35]},deal:{trader1:new w(0),trader2:new w(0),phase:"default",money1:0,money2:0,tiles:[]}},a.turn="1",a.gameOver=!1,a.counter=0,a.begin=!0,a.armyPrice=150,a.winCondition={money:2500},a.turnCount=1,a.goListener=function(){a.onMove()},a.payListener=function(){a.onPay()},a.purchaseListener=function(){a.onPurchase()},a.endTurnListener=function(){a.endTurn()},a.upgradeListener=function(){a.onUpgrade()},a.assaultListener=function(){a.onAssault()},a.recruitListener=function(){a.onRecruit()},a.tradeListener1=function(){a.onTrade(1)},a.tradeListener2=function(){a.onTrade(2)},a.tradeListener3=function(){a.onTrade(3)},a.tradeListener4=function(){a.onTrade(4)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,function(t){if(console.log("turn ",t.message.turn," player ",e.props.piece,", action: ",t.message.action),"chat"==t.message.action&&e.updateChat(t.message.chat),"end turn"==t.message.action&&e.newTurn(t.message.turn),"trade"!=t.message.action&&"endTrade"!=t.message.action||e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts,t.message.deal),e.turn!=e.props.piece&&("move"==t.message.action?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):["purchase","pay","upgrade","recruit","assault"].includes(t.message.action)?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts,t.message.deal):console.log(t.message)),t.message.toasts){var a=!0,r=!1,n=void 0;try{for(var s,l=t.message.toasts[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;e.updateChat(o)}}catch(i){r=!0,n=i}finally{try{a||null==l.return||l.return()}finally{if(r)throw n}}}"victory"==t.message.action&&alert("A victor has emerged!")})}},{key:"render",value:function(){var e,t;return console.log("render"),window.onbeforeunload=function(e){return"Leaving the page will end the game."},window.onunload=function(e){return"Leaving the page will end the game."},e="".concat(this.props.piece==this.turn?"Your turn":"Opponent's turn"),t=this.props.piece==this.turn&&this.begin&&"1"==this.props.piece?n.a.createElement("button",{className:"go",onClick:this.goListener},n.a.createElement("b",null,"GO!"),n.a.createElement("div",null,"\ud83c\udfb2"),n.a.createElement("div",null,"\ud83c\udfb2")):n.a.createElement("button",{className:"go",disabled:!0},n.a.createElement("b",null,"GO!"),n.a.createElement("div",null,"\ud83c\udfb2"),n.a.createElement("div",null,"\ud83c\udfb2")),n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"board"},n.a.createElement(b,{piece:this.props.piece,squares:this.state.squares,buyPrices:this.state.buyPrices,provinces:this.state.provinces,specials:this.state.specials})),n.a.createElement("div",{className:"pawn",id:"pawn1"},"player 1"),n.a.createElement("div",{className:"pawn",id:"pawn2"},"player 2"),n.a.createElement("div",{className:"pawn",id:"pawn3"},"player 3"),n.a.createElement("div",{className:"pawn",id:"pawn4"},"player 4"),n.a.createElement("div",{className:"control"},n.a.createElement("p",{className:"status-info"},e),n.a.createElement("div",null,"RoomID: ",this.props.roomId),n.a.createElement("b",null,"You are player ",this.props.piece),n.a.createElement("p",null,"Win condition: 1. Reaches $",this.winCondition.money,"."),n.a.createElement("p",null,"Win condition: 2. Has the most money when someone bankrupts."),n.a.createElement(k.ToastsContainer,{store:k.ToastsStore}),t,n.a.createElement("button",{className:"purchase",disabled:!0},n.a.createElement("b",null,"Purchase land")),n.a.createElement("button",{className:"pay",disabled:!0},n.a.createElement("b",null,"Pay rent")),n.a.createElement("button",{className:"upgrade",disabled:!0},n.a.createElement("b",null,"Upgrade land"),n.a.createElement("div",{className:"toolTip"},n.a.createElement("p",null,"Upgrade land to charge more rent and station more defending garrisons. Can only perform once per turn."))),n.a.createElement("button",{className:"recruit",disabled:!0},n.a.createElement("b",null,"Recruit gangster"),n.a.createElement("div",{className:"toolTip"},n.a.createElement("p",null,"Hire a gangster that follows you for $150 when going to your owned land. Can only perform once per turn."))),n.a.createElement("button",{className:"assault",disabled:!0},n.a.createElement("b",null,"Assault property"),n.a.createElement("div",{className:"toolTip"},n.a.createElement("p",null,"Don't want to pay rent? Take it by force by using your gangsters to fight this land's garrisons! You lose half gangsters no matter win or loss."))),n.a.createElement("br",null),n.a.createElement("button",{className:"trade1 redText",disabled:!0},n.a.createElement("p",null,"Trade with player 1")),n.a.createElement("button",{className:"trade2 blueText",disabled:!0},n.a.createElement("p",null,"Trade with player 2")),n.a.createElement("button",{className:"trade3 purpleText",disabled:!0},n.a.createElement("p",null,"Trade with player 3")),n.a.createElement("button",{className:"trade4 greenText",disabled:!0},n.a.createElement("p",null,"Trade with player 4")),n.a.createElement("button",{className:"endTurn",disabled:!0},n.a.createElement("b",null,"End turn!")),n.a.createElement("div",{className:"chatArea"},n.a.createElement("div",{className:"chatInputArea"},n.a.createElement("input",{type:"text",id:"chatInput"}),n.a.createElement("button",{id:"sendChat",onClick:this.sendChat},"send")),n.a.createElement("textarea",{rows:"4",cols:"50",id:"chats",disabled:!0})),n.a.createElement("div",{className:"bottomPanel"},n.a.createElement("div",{className:"playersInfoWrapper"},n.a.createElement("div",{className:"playersInfo"},"player 1",n.a.createElement("br",null),"territory: ",this.state.players[1].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[1].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[1].army,n.a.createElement("br",null),"money: $",this.state.players[1].money),n.a.createElement("div",{className:"playersInfo"},"player 2",n.a.createElement("br",null),"territory: ",this.state.players[2].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[2].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[2].army,n.a.createElement("br",null),"money: $",this.state.players[2].money,n.a.createElement("br",null)),n.a.createElement("div",{className:"playersInfo"},"player 3",n.a.createElement("br",null),"territory: ",this.state.players[3].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[3].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[3].army,n.a.createElement("br",null),"money: $",this.state.players[3].money),n.a.createElement("div",{className:"playersInfo"},"player 4",n.a.createElement("br",null),"territory: ",this.state.players[4].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[4].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[4].army,n.a.createElement("br",null),"money: $",this.state.players[4].money,n.a.createElement("br",null))),n.a.createElement("div",{id:"tradePanel"}))))}}]),t}(n.a.Component),C=a(16),q=a.n(C),N=(a(43),a(52),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPressCreate=function(e){a.roomId=parseInt(1e5*Math.random()).toString(10),a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),f.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friend",text:a.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),a.setState({piece:"1",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},a.onPressJoin=function(e){f.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"blue",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class "}}).then(function(e){e.value&&a.joinRoom(e.value)})},a.joinRoom=function(e){a.roomId=e,a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.hereNow({channels:[a.lobbyChannel]}).then(function(e){alert("Current players in the room: "+e.totalOccupancy),e.totalOccupancy<4?(a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),a.setState({piece:(1+e.totalOccupancy).toString()}),a.pubnub.publish({message:{notRoomCreator:!0},channel:a.lobbyChannel})):f.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},a.endGame=function(){a.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.unsubscribe({channels:[a.lobbyChannel,a.gameChannel]})},a.pubnub=new q.a({publishKey:"pub-c-7ff08bc5-f641-4297-aef9-00f08ecdd561",subscribeKey:"sub-c-a408ea2a-1236-11ea-8755-faba8a6641c7",uuid:parseInt(1e5*Math.random()).toString(10)}),a.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.init(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.notRoomCreator&&(e.gameChannel="mafiaGame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),f.a.close())})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,!this.state.isPlaying&&n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"button-container"},n.a.createElement("p",null,"This is Mafia Wars! "),n.a.createElement("p",null,"Latest update: fixed hover bug on mobile."),n.a.createElement("p",null,"It's a monopoly game in which you can hire gangsters and take other players' lands by force! "),n.a.createElement("p",null,'The combat mechanism is like Risk, You fight with "gangster" number of dices against "garrisons" number of dices, the one with more total points wins!'),n.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),n.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join"),n.a.createElement("p",null,"How to start a game: "),n.a.createElement("p",null,"1 player creates the room, the game will appear when another player joins."),n.a.createElement("p",null,"If there are more than 2 players, please join room one player at a time to avoid crashes. "),n.a.createElement("p",null,"Refreshing the page will end the game."),n.a.createElement("p",null,"To restart, everyone needs to refresh and start over from this page."),n.a.createElement("p",null,"You can open another browser tab and join as another player."))),this.state.isPlaying&&n.a.createElement(S,{roomId:this.roomId,pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,endGame:this.endGame}))}}]),t}(r.Component));l.a.render(n.a.createElement(N,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.f67d72ad.chunk.js.map