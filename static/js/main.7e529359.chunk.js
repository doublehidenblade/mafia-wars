(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){},19:function(e,t,a){},25:function(e,t,a){e.exports=a(62)},31:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(5),l=a.n(n),i=a(4),o=a(6),c=a(8),u=a(7),p=a(3),d=a(9),m=a(12),y=a.n(m),h=a(15),b=a(1),v=a.n(b),f=(a(18),function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t;if(this.props.special)0==this.props.num?(e=s.a.createElement("div",{className:"face"},s.a.createElement("b",null,this.props.name),s.a.createElement("br",null)),t=s.a.createElement("b",{className:v()("detail",this.props.provinceColor)},"Collect $200!")):[2,7,17,22,33,36].includes(this.props.num)?(e=s.a.createElement("div",{className:"face"},s.a.createElement("b",{className:"random"},"?")),t=s.a.createElement("div",{className:v()("detail",this.props.provinceColor)},s.a.createElement("b",null,"Random events!"))):20==this.props.num?(e=s.a.createElement("div",{className:"face"},s.a.createElement("b",null,this.props.name),s.a.createElement("br",null)),t=s.a.createElement("b",{className:v()("detail",this.props.provinceColor)},"Do nothing!")):[10,30].includes(this.props.num)?(e=s.a.createElement("div",{className:"face"},s.a.createElement("b",null,this.props.name),s.a.createElement("br",null)),t=s.a.createElement("b",{className:v()("detail",this.props.provinceColor)},"Cargos have arrived! Every bodyguard earns money for unloading.")):e=4==this.props.num?s.a.createElement("div",{className:"face"},s.a.createElement("b",null,"10% tax!")):s.a.createElement("div",{className:"face"},s.a.createElement("b",null,"20% tax!"));else if([5,15,25,35].includes(this.props.num)){e=s.a.createElement("div",{className:"face"},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("i",null,this.props.ownerNum));var a=[];this.props.multiplier>1?a.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[0]," x",this.props.multiplier)):a.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[0])),t=s.a.createElement("div",{className:v()("detail",this.props.provinceColor)},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("b",null,"Buy price: "),s.a.createElement("b",{className:"redText"},this.props.buyPrice?"$"+this.props.buyPrice:null),s.a.createElement("br",null),s.a.createElement("div",{className:"sideBySide"},s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"rents: "),a),s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"guards: "),s.a.createElement("b",{className:v()("owner","redText")},this.props.guards[0]))),s.a.createElement("b",null,"Owning 2 railways charges 2x rent, 3 railways 4x rent, 4 railways 8x rent."))}else if([12,28].includes(this.props.num)){e=s.a.createElement("div",{className:"face"},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("i",null,this.props.ownerNum));var r=[];this.props.multiplier>1?r.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[0]," x",this.props.multiplier)):r.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[0])),t=s.a.createElement("div",{className:v()("detail",this.props.provinceColor)},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("b",null,"Buy price: "),s.a.createElement("b",{className:"redText"},this.props.buyPrice?"$"+this.props.buyPrice:null),s.a.createElement("br",null),s.a.createElement("div",{className:"sideBySide"},s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"rents: "),r),s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"guards: "),s.a.createElement("b",{className:"redText"},this.props.guards[0]))),s.a.createElement("b",null,"Owning both Electric Company and Water Works charges 2x rent."))}else{e=s.a.createElement("div",{className:"face"},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("i",null,this.props.ownerNum),s.a.createElement("br",null),s.a.createElement("b",null,this.props.level?"level: "+this.props.level:null));var n=[],l=[];if(this.props.rents)for(var i in this.props.rents)i==this.props.level?this.props.multiplier>1?n.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[i]," x",this.props.multiplier)):n.push(s.a.createElement("b",{className:v()("owner","redText")},"$",this.props.rents[i])):n.push(s.a.createElement("b",null,"$",this.props.rents[i]));if(this.props.guards)for(var o in this.props.guards)o==this.props.level?l.push(s.a.createElement("b",{className:v()("owner","redText")},this.props.guards[o])):l.push(s.a.createElement("b",null,this.props.guards[o]));t=s.a.createElement("div",{className:v()("detail",this.props.provinceColor)},s.a.createElement("b",{className:"owner"},this.props.name),s.a.createElement("br",null),s.a.createElement("b",null,"Buy price: "),s.a.createElement("b",{className:"redText"},this.props.buyPrice?"$"+this.props.buyPrice:null),s.a.createElement("br",null),s.a.createElement("div",{className:"sideBySide"},s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"rents: "),s.a.createElement("br",null),n),s.a.createElement("div",{className:"column"},s.a.createElement("b",null,"guards: "),s.a.createElement("br",null),l)),s.a.createElement("b",{className:"redText"},this.props.upgradePrice?"upgrade price: $"+this.props.upgradePrice:null),s.a.createElement("br",null),s.a.createElement("b",null,"Owning all properties of same color charges 2x rent."))}return s.a.createElement("div",{className:v()("square",this.props.styleName,this.props.provinceColor),id:this.props.id},e,t)}}]),t}(s.a.Component)),E=(a(19),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).playerColors=[null,"redText","blueText","purpleText","greenText"],a.playerBorders=[null,"redBorder","blueBorder","purpleBorder","greenBorder"],a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"createBoard",value:function(){var e=[];e.push(s.a.createElement("div",{className:v()("center",this.playerBorders[this.props.piece])}));var t=this.renderSquare(0,"corner");e.push(t);for(var a=[],r=1;r<10;r++)a.push(this.renderSquare(r));e.push(s.a.createElement("div",{className:"row horizontal-row top-row"},a)),t=this.renderSquare(10,"corner"),e.push(t),a=[];for(var n=11;n<20;n++)a.push(this.renderSquare(n));e.push(s.a.createElement("div",{className:"row vertical-row right-row"},a)),t=this.renderSquare(30,"corner"),e.push(t),a=[];for(var l=29;l>20;l--)a.push(this.renderSquare(l));e.push(s.a.createElement("div",{className:"row horizontal-row bottom-row"},a)),t=this.renderSquare(20,"corner"),e.push(t),a=[];for(var i=39;i>30;i--)a.push(this.renderSquare(i));return e.push(s.a.createElement("div",{className:"row vertical-row left-row"},a)),e}},{key:"renderSquare",value:function(e,t){return s.a.createElement(f,{key:e,id:"square"+e,num:e,name:this.props.squares[e]?this.props.squares[e].name:null,multiplier:this.props.squares[e]?this.props.squares[e].multiplier:1,special:this.props.specials.includes(e),buyPrice:this.props.buyPrices[e],styleName:t,provinceColor:this.props.provinces[e],ownerNum:this.props.squares[e].owner?parseInt(this.props.squares[e].owner.slice(6)):null,rents:this.props.squares[e]?this.props.squares[e].rents:null,guards:this.props.squares[e]?this.props.squares[e].guards:null,upgradePrice:this.props.squares[e]?this.props.squares[e].upgradePrice:null,level:this.props.squares[e]?this.props.squares[e].level:null})}},{key:"render",value:function(){return s.a.createElement("div",{onClick:this.showDetail},this.createBoard())}}]),t}(s.a.Component)),g=(a(31),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dealMoney1:a.props.dealMoney1,dealMoney2:a.props.dealMoney2,dealArmy1:a.props.dealArmy1,dealArmy2:a.props.dealArmy2},a.money1SliderHandler=a.money1SliderHandler.bind(Object(p.a)(a)),a.money2SliderHandler=a.money2SliderHandler.bind(Object(p.a)(a)),a.army1SliderHandler=a.army1SliderHandler.bind(Object(p.a)(a)),a.army2SliderHandler=a.army2SliderHandler.bind(Object(p.a)(a)),a.propose=a.propose.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.counter=a.counter.bind(Object(p.a)(a)),a.accept=a.accept.bind(Object(p.a)(a)),a.decline=a.decline.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"propose",value:function(){for(var e=[],t=0,a=Array.from(document.getElementsByClassName("tileCheckBox"));t<a.length;t++){var r=a[t];r.checked&&e.push(r.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:this.state.dealMoney1,money2:this.state.dealMoney2,army1:this.state.dealArmy1,army2:this.state.dealArmy2,tiles:e,action:"propose"})}},{key:"counter",value:function(){for(var e=[],t=0,a=Array.from(document.getElementsByClassName("tileCheckBox"));t<a.length;t++){var r=a[t];r.checked&&e.push(r.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:this.state.dealMoney1,money2:this.state.dealMoney2,army1:this.state.dealArmy1,army2:this.state.dealArmy2,tiles:e,action:"counter"})}},{key:"decline",value:function(){this.props.submit({action:"decline"})}},{key:"accept",value:function(){for(var e=document.querySelector("#money1").value,t=document.querySelector("#money2").value,a=document.querySelector("#army1").value,r=document.querySelector("#army2").value,s=[],n=0,l=Array.from(document.getElementsByClassName("tileCheckBox"));n<l.length;n++){var i=l[n];i.checked&&s.push(i.id)}this.props.submit({trader1:this.props.trader1,trader2:this.props.trader2,money1:e,money2:t,army1:a,army2:r,tiles:s,action:"accept"})}},{key:"cancel",value:function(){this.props.submit({action:"cancel"})}},{key:"money1SliderHandler",value:function(e){this.setState({dealMoney1:e.target.value})}},{key:"money2SliderHandler",value:function(e){this.setState({dealMoney2:e.target.value})}},{key:"army1SliderHandler",value:function(e){this.setState({dealArmy1:e.target.value})}},{key:"army2SliderHandler",value:function(e){this.setState({dealArmy2:e.target.value})}},{key:"render",value:function(){var e,t=[],a=[];if(this.props.piece==this.props.trader1&&"propose"==this.props.phase){var r=!0,n=!1,l=void 0;try{for(var i,o=this.props.territory1[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value,u=this.props.squares[c];t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:u.num})," ",u.name))}}catch(le){n=!0,l=le}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}var p=!0,d=!1,m=void 0;try{for(var y,h=this.props.territory2[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var b=y.value,v=this.props.squares[b];a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:v.num})," ",v.name))}}catch(le){d=!0,m=le}finally{try{p||null==h.return||h.return()}finally{if(d)throw m}}e=s.a.createElement("div",{className:"tradeWrapper"},s.a.createElement("div",{className:"tradeInfo"},s.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",onChange:this.money1SliderHandler}),s.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy1,step:"1",value:this.state.dealArmy1,className:"slider",id:"army1",onChange:this.army1SliderHandler}),s.a.createElement("div",{className:"armySliderValue1"},"bodyGuards: ",this.state.dealArmy1),t),s.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",onChange:this.money2SliderHandler}),s.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy2,step:"1",value:this.state.dealArmy2,className:"slider",id:"army2",onChange:this.army2SliderHandler}),s.a.createElement("div",{className:"armySliderValue2"},"bodyGuards: ",this.state.dealArmy2),a)),s.a.createElement("button",{onClick:this.propose},"Propose"),s.a.createElement("button",{onClick:this.cancel},"Cancel"))}else if(this.props.piece==this.props.trader2&&"counter"==this.props.phase){var f=!0,E=!1,g=void 0;try{for(var w,k=this.props.territory1[Symbol.iterator]();!(f=(w=k.next()).done);f=!0){var S=w.value,N=this.props.squares[S];this.props.dealTiles.includes(N.num.toString())?t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:N.num,checked:!0})," ",N.name)):t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:N.num})," ",N.name))}}catch(le){E=!0,g=le}finally{try{f||null==k.return||k.return()}finally{if(E)throw g}}var C=!0,q=!1,x=void 0;try{for(var L,T=this.props.territory2[Symbol.iterator]();!(C=(L=T.next()).done);C=!0){var A=L.value,P=this.props.squares[A];this.props.dealTiles.includes(P.num.toString())?a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:P.num,checked:!0})," ",P.name)):a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:P.num})," ",P.name))}}catch(le){q=!0,x=le}finally{try{C||null==T.return||T.return()}finally{if(q)throw x}}e=s.a.createElement("div",{className:"tradeWrapper"},s.a.createElement("div",{className:"tradeInfo"},s.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",onChange:this.money1SliderHandler}),s.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy1,step:"1",value:this.state.dealArmy1,className:"slider",id:"army1",onChange:this.army1SliderHandler}),s.a.createElement("div",{className:"armySliderValue1"},"bodyGuards: ",this.state.dealArmy1),t),s.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",onChange:this.money2SliderHandler}),s.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy2,step:"1",value:this.state.dealArmy2,className:"slider",id:"army2",onChange:this.army2SliderHandler}),s.a.createElement("div",{className:"armySliderValue2"},"bodyGuards: ",this.state.dealArmy2),a)),s.a.createElement("button",{onClick:this.accept},"Accept"),s.a.createElement("button",{onClick:this.counter},"Propose"),s.a.createElement("button",{onClick:this.decline},"Decline"))}else if(this.props.piece==this.props.trader1&&"confirm"==this.props.phase){var I=!0,O=!1,M=void 0;try{for(var j,B=this.props.territory1[Symbol.iterator]();!(I=(j=B.next()).done);I=!0){var $=j.value,D=this.props.squares[$];this.props.dealTiles.includes(D.num.toString())?t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:D.num,checked:!0,disabled:!0})," ",D.name)):t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:D.num,disabled:!0})," ",D.name))}}catch(le){O=!0,M=le}finally{try{I||null==B.return||B.return()}finally{if(O)throw M}}var H=!0,R=!1,V=void 0;try{for(var G,W=this.props.territory2[Symbol.iterator]();!(H=(G=W.next()).done);H=!0){var Y=G.value,U=this.props.squares[Y];this.props.dealTiles.includes(U.num.toString())?a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:U.num,checked:!0,disabled:!0})," ",U.name)):a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:U.num,disabled:!0})," ",U.name))}}catch(le){R=!0,V=le}finally{try{H||null==W.return||W.return()}finally{if(R)throw V}}e=s.a.createElement("div",{className:"tradeWrapper"},s.a.createElement("div",{className:"tradeInfo"},s.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",disabled:!0}),s.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy1,step:"1",value:this.state.dealArmy1,className:"slider",id:"army1",onChange:this.army1SliderHandler}),s.a.createElement("div",{className:"armySliderValue1"},"bodyGuards: ",this.state.dealArmy1),t),s.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",disabled:!0}),s.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy2,step:"1",value:this.state.dealArmy2,className:"slider",id:"army2",onChange:this.army2SliderHandler}),s.a.createElement("div",{className:"armySliderValue2"},"bodyGuards: ",this.state.dealArmy2),a)),s.a.createElement("button",{onClick:this.accept},"Accept"),s.a.createElement("button",{onClick:this.decline},"Decline"))}else{var J=!0,F=!1,K=void 0;try{for(var z,Q=this.props.territory1[Symbol.iterator]();!(J=(z=Q.next()).done);J=!0){var X=z.value,Z=this.props.squares[X];this.props.dealTiles.includes(Z.num.toString())?t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:Z.num,checked:!0,disabled:!0})," ",Z.name)):t.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:Z.num,disabled:!0})," ",Z.name))}}catch(le){F=!0,K=le}finally{try{J||null==Q.return||Q.return()}finally{if(F)throw K}}var _=!0,ee=!1,te=void 0;try{for(var ae,re=this.props.territory2[Symbol.iterator]();!(_=(ae=re.next()).done);_=!0){var se=ae.value,ne=this.props.squares[se];this.props.dealTiles.includes(ne.num.toString())?a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:ne.num,checked:!0,disabled:!0})," ",ne.name)):a.push(s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",className:"tileCheckBox",id:ne.num,disabled:!0})," ",ne.name))}}catch(le){ee=!0,te=le}finally{try{_||null==re.return||re.return()}finally{if(ee)throw te}}e=s.a.createElement("div",{className:"tradeWrapper"},s.a.createElement("div",{className:"tradeInfo"},s.a.createElement("div",{className:"trader give"},"Player ",this.props.trader1," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney1,step:"10",value:this.state.dealMoney1,className:"slider",id:"money1",disabled:!0}),s.a.createElement("div",{className:"sliderValue1"},"$ ",this.state.dealMoney1),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy1,step:"1",value:this.state.dealArmy1,className:"slider",id:"army1",onChange:this.army1SliderHandler}),s.a.createElement("div",{className:"armySliderValue1"},"bodyGuards: ",this.state.dealArmy1),t),s.a.createElement("div",{className:"trader take"},"Player ",this.props.trader2," gives:",s.a.createElement("br",null),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxMoney2,step:"10",value:this.state.dealMoney2,className:"slider",id:"money2",disabled:!0}),s.a.createElement("div",{className:"sliderValue2"},"$ ",this.state.dealMoney2),s.a.createElement("input",{type:"range",min:"0",max:this.props.maxArmy2,step:"1",value:this.state.dealArmy2,className:"slider",id:"army2",onChange:this.army2SliderHandler}),s.a.createElement("div",{className:"armySliderValue2"},"bodyGuards: ",this.state.dealArmy2),a)))}return s.a.createElement("div",null,e)}}]),t}(s.a.Component)),w=a(11),k=a.n(w),S=a(16),N=a.n(S),C=function e(t,a,r,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;Object(i.a)(this,e),this.num=t,this.name=a,this.owner=null,this.rents=r||[10,20,40,80],this.guards=s||[4,5,6,8],this.upgradePrice=n,this.level=0,this.multiplier=1},q=function e(t){Object(i.a)(this,e),this.number=t,this.army=1,this.money=1500,this.territory=[],this.position=0,this.railsOwned=0},x=a(2),L=(a(39),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).checkForWinner=function(e){var t;if(e&&"bankrupt"==e){var r=0,s=!0,n=!1,l=void 0;try{for(var i,o=a.state.players[Symbol.iterator]();!(s=(i=o.next()).done);s=!0){var c=i.value;c&&(c.money>0&&(r=a.player.number))}}catch(b){n=!0,l=b}finally{try{s||null==o.return||o.return()}finally{if(n)throw l}}t="A player has bankrupted! Player ".concat(r," has won!"),!0,a.props.pubnub.publish({message:{action:"victory",toasts:[t]},channel:a.props.lobbyChannel})}else{var u=!0,p=!1,d=void 0;try{for(var m,y=a.state.players[Symbol.iterator]();!(u=(m=y.next()).done);u=!0){var h=m.value;if(h&&h.money>=a.winCondition.money){t="Player ".concat(h.number," has reached monetory victory by reaching $").concat(a.winCondition.money,"!"),!0,a.props.pubnub.publish({message:{action:"victory",toasts:[t]},channel:a.props.lobbyChannel});break}}}catch(b){p=!0,d=b}finally{try{u||null==y.return||y.return()}finally{if(p)throw d}}console.log("no victory reached")}},a.updateChat=function(e){var t=document.querySelector("#chats");t.value="".concat(e)+"\n"+t.value},a.newTurn=function(e){console.log("Player "+e+"'s new turn!"),a.turn=e;var t=document.getElementsByClassName("status-info")[0];t.innerHTML="Player "+a.turn+"'s turn";var r=document.querySelector("#tradePanel");if(0!=r.children.length&&l.a.unmountComponentAtNode(r),a.turn==a.props.piece){x.ToastsStore.warning("Your turn!",4e3),t.innerHTML="Your turn!";var s=document.querySelector("button.go");s.addEventListener("click",a.goListener),s.removeAttribute("disabled")}},a.updateBoard=function(e,t,r,n,i,o){a.setState(function(){return{squares:n}}),a.setState(function(){return{players:r}});var c=document.querySelector("#tradePanel");"endTrade"==e?(a.setState(function(){return{deal:o}}),0!=c.children.length&&l.a.unmountComponentAtNode(c)):o&&(a.setState(function(){return{deal:o}}),"propose"==a.state.deal.phase?a.state.deal.trader1.number==a.props.piece&&l.a.render(s.a.createElement(g,{phase:a.state.deal.phase,piece:a.props.piece,turn:a.turn,trader1:a.state.deal.trader1.number,trader2:a.state.deal.trader2.number,maxMoney1:a.state.deal.trader1.money,maxMoney2:a.state.deal.trader2.money,maxArmy1:a.state.deal.trader1.army,maxArmy2:a.state.deal.trader2.army,dealMoney1:a.state.deal.money1,dealMoney2:a.state.deal.money2,dealArmy1:a.state.deal.army1,dealArmy2:a.state.deal.army2,territory1:a.state.deal.trader1.territory,territory2:a.state.deal.trader2.territory,dealTiles:a.state.deal.tiles,squares:a.state.squares,submit:a.submit}),c):(0!=c.children.length&&l.a.unmountComponentAtNode(c),l.a.render(s.a.createElement(g,{phase:a.state.deal.phase,piece:a.props.piece,turn:a.turn,trader1:a.state.deal.trader1.number,trader2:a.state.deal.trader2.number,maxMoney1:a.state.deal.trader1.money,maxMoney2:a.state.deal.trader2.money,maxArmy1:a.state.deal.trader1.army,maxArmy2:a.state.deal.trader2.army,dealMoney1:a.state.deal.money1,dealMoney2:a.state.deal.money2,dealArmy1:a.state.deal.army1,dealArmy2:a.state.deal.army2,territory1:a.state.deal.trader1.territory,territory2:a.state.deal.trader2.territory,dealTiles:a.state.deal.tiles,squares:a.state.squares,submit:a.submit}),c)))},a.checkMonopoly=function(e){var t=a.state.neighbors[e],r=a.state.squares[t[0]].owner;if([5,15,25,35].includes(parseInt(e))){var s=!0,n=!1,l=void 0;try{for(var i,o=t[Symbol.iterator]();!(s=(i=o.next()).done);s=!0){var c=i.value,u=a.state.squares[c];if(u.owner){var p=a.state.players[u.owner[u.owner.length-1]].railsOwned;a.state.squares[c].multiplier=Math.pow(2,p-1)}}}catch(P){n=!0,l=P}finally{try{s||null==o.return||o.return()}finally{if(n)throw l}}}else{var d=!0,m=!0,y=!1,h=void 0;try{for(var b,v=t[Symbol.iterator]();!(m=(b=v.next()).done);m=!0){var f=b.value;if(a.state.squares[f].owner!=r){d=!1;break}}}catch(P){y=!0,h=P}finally{try{m||null==v.return||v.return()}finally{if(y)throw h}}if(d){var E=!0,g=!1,w=void 0;try{for(var k,S=t[Symbol.iterator]();!(E=(k=S.next()).done);E=!0){var N=k.value;a.state.squares[N].multiplier=2}}catch(P){g=!0,w=P}finally{try{E||null==S.return||S.return()}finally{if(g)throw w}}}else{var C=!0,q=!1,x=void 0;try{for(var L,T=t[Symbol.iterator]();!(C=(L=T.next()).done);C=!0){var A=L.value;a.state.squares[A].multiplier=1}}catch(P){q=!0,x=P}finally{try{C||null==T.return||T.return()}finally{if(q)throw x}}}}},a.movePawn=function(e,t){var r=document.querySelector("#pawn".concat(e)),s=document.querySelector("#square".concat(t));r.style.left="calc("+a.state.leftOffsets[e]+"vmin + "+s.offsetLeft+"px)",r.style.top="calc("+a.state.topOffsets[e]+"vmin + "+s.offsetTop+"px)"},a.onPurchase=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],s=[];if(a.turn!=a.props.piece||r.owner)x.ToastsStore.error("invalid move");else{a.state.players[a.props.piece].money<a.state.buyPrices[t]?(e="player "+a.props.piece+" has insufficient money",x.ToastsStore.error(e),s.push(e)):(a.state.players[a.props.piece].money=a.state.players[a.props.piece].money-a.state.buyPrices[t],a.state.players[a.props.piece].territory.push(t),a.state.squares[t].owner="player "+a.props.piece,[5,15,25,35].includes(t)&&(a.state.players[a.props.piece].railsOwned+=1),a.checkMonopoly(t),e="Player ".concat(a.props.piece," purchased tile ").concat(a.state.squares[t].name," for $").concat(a.state.buyPrices[t]),s.push(e));var n=document.querySelector("button.purchase");n.removeEventListener("click",a.purchaseListener),n.setAttribute("disabled","true"),a.props.pubnub.publish({message:{action:"purchase",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.lobbyChannel})}},a.onPay=function(){var e,t=a.state.players[a.props.piece],r=a.state.players[a.props.piece].position,s=a.state.squares[r],n=[];if(a.turn===a.props.piece&&s.owner&&s.owner!="player "+a.props.piece){var l=a.state.players[s.owner[s.owner.length-1]];t.money<s.rents[s.level]*s.multiplier?(e="player ".concat(a.props.piece," bankrupts!"),x.ToastsStore.error(e),n.push(e),a.checkForWinner("bankrupt")):(t.money=t.money-s.rents[s.level]*s.multiplier,l.money=l.money+s.rents[s.level]*s.multiplier,e="Player ".concat(a.props.piece," paid player ").concat(s.owner[s.owner.length-1]," $").concat(s.rents[s.level]*s.multiplier),n.push(e));var i=document.querySelector("button.pay"),o=document.querySelector("button.assault"),c=document.querySelector("button.endTurn");o.removeEventListener("click",a.assaultListener),o.setAttribute("disabled","true"),i.removeEventListener("click",a.payListener),i.setAttribute("disabled","true"),c.addEventListener("click",a.endTurnListener),c.removeAttribute("disabled");var u=document.querySelector("button.trade1");1==u.disabled&&(u.addEventListener("click",a.tradeListener1),u.removeAttribute("disabled"));var p=document.querySelector("button.trade2");1==p.disabled&&(p.addEventListener("click",a.tradeListener2),p.removeAttribute("disabled"));var d=document.querySelector("button.trade3");1==d.disabled&&(d.addEventListener("click",a.tradeListener3),d.removeAttribute("disabled"));var m=document.querySelector("button.trade4");1==m.disabled&&(m.addEventListener("click",a.tradeListener4),m.removeAttribute("disabled")),a.props.pubnub.publish({message:{action:"pay",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:n},channel:a.props.lobbyChannel})}else x.ToastsStore.error("invalid move")},a.onUpgrade=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],s=a.state.players[a.props.piece],n=[];a.turn===a.props.piece&&r.owner=="player "+a.props.piece?(r.level>=6?(e="Tile ".concat(t," is already at max level"),x.ToastsStore.error(e),n.push(e)):s.money<r.upgradePrice?(e="Player ".concat(a.props.piece," has insufficient money"),x.ToastsStore.error(e),n.push(e)):(s.money-=r.upgradePrice,r.level+=1,e="Player ".concat(a.props.piece," updated ").concat(a.state.squares[t].name," to level ").concat(r.level),n.push(e)),document.querySelector("button.upgrade").removeEventListener("click",a.upgradeListener),a.setState({upgradeDisabled:!0}),document.querySelector("button.recruit").removeEventListener("click",a.recruitListener),a.setState({recruitDisabled:!0}),a.props.pubnub.publish({message:{action:"upgrade",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:n},channel:a.props.lobbyChannel})):x.ToastsStore.error("invalid move")},a.siege=function(e,t,r){for(var s=a.state.squares[r],n=[],l=[],i=0,o=0,c=0;c<e.army;c++){var u=parseInt(6*Math.random())+1;n.push(u),i+=u}for(var p=0;p<s.guards[s.level];p++){var d=parseInt(6*Math.random())+1;l.push(d),o+=d}return{attackTotal:i,defendTotal:o,attackDices:n,defendDices:l}},a.onRecruit=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],s=a.state.players[a.props.piece],n=[];a.turn===a.props.piece&&r.owner&&r.owner=="player "+a.props.piece?(s.money<a.armyPrice?(e="player "+a.props.piece+" has insufficient money",x.ToastsStore.error(e),n.push(e)):(s.money-=a.armyPrice,s.army+=1,e="Player ".concat(a.props.piece," recruited 1 bodyguard for $").concat(a.armyPrice),n.push(e)),document.querySelector("button.recruit").removeEventListener("click",a.recruitListener),a.setState({recruitDisabled:!0}),document.querySelector("button.upgrade").removeEventListener("click",a.upgradeListener),a.setState({upgradeDisabled:!0}),a.props.pubnub.publish({message:{action:"recruit",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:n},channel:a.props.lobbyChannel})):x.ToastsStore.error("invalid move")},a.submit=function(e){var t,r=[];t="".concat(e.action),r.push(t);var s="trade";a.state.deal.trader1=a.state.players[e.trader1],a.state.deal.trader2=a.state.players[e.trader2],a.state.deal.money1=e.money1,a.state.deal.money2=e.money2,a.state.deal.army1=e.army1,a.state.deal.army2=e.army2,a.state.deal.tiles=e.tiles;var n=document.querySelector("#tradePanel");if("propose"==e.action)a.state.deal.phase="counter";else if("counter"==e.action)a.state.deal.phase="confirm";else if("accept"==e.action){s="endTrade",0!=n.children.length&&l.a.unmountComponentAtNode(n),a.state.players[e.trader1].money-=parseInt(e.money1),a.state.players[e.trader2].money-=parseInt(e.money2),a.state.players[e.trader1].money+=parseInt(e.money2),a.state.players[e.trader2].money+=parseInt(e.money1),a.state.players[e.trader1].army-=parseInt(e.army1),a.state.players[e.trader2].army-=parseInt(e.army2),a.state.players[e.trader1].army+=parseInt(e.army2),a.state.players[e.trader2].army+=parseInt(e.army1);var i=!0,o=!1,c=void 0;try{for(var u,p=e.tiles[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var d=u.value,m=!1;for(var y in a.state.deal.trader1.territory){var h=a.state.deal.trader1.territory[y];if(h==d){a.state.squares[d].owner="player "+a.state.deal.trader2.number,a.state.deal.trader1.territory.splice(y,1),a.state.deal.trader2.territory.push(h),[5,15,25,35].includes(parseInt(d))&&(a.state.deal.trader1.railsOwned-=1,a.state.deal.trader2.railsOwned+=1),m=!0;break}}if(!m)for(var b in a.state.deal.trader2.territory){var v=a.state.deal.trader2.territory[b];if(v==d){a.state.squares[d].owner="player "+a.state.deal.trader1.number,a.state.deal.trader2.territory.splice(b,1),a.state.deal.trader1.territory.push(v),[5,15,25,35].includes(parseInt(d))&&(a.state.deal.trader1.railsOwned+=1,a.state.deal.trader2.railsOwned-=1);break}}a.checkMonopoly(d)}}catch(f){o=!0,c=f}finally{try{i||null==p.return||p.return()}finally{if(o)throw c}}a.state.deal.trader1=new q(0),a.state.deal.trader2=new q(0),a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.army1=0,a.state.deal.army2=0,a.state.deal.tiles=[]}else"decline"!=e.action&&"cancel"!=e.action||(s="endTrade",0!=n.children.length&&l.a.unmountComponentAtNode(n),a.state.deal.trader1=new q(0),a.state.deal.trader2=new q(0),a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.army1=0,a.state.deal.army2=0,a.state.deal.tiles=[]);a.props.pubnub.publish({message:{action:s,turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:r,deal:a.state.deal},channel:a.props.lobbyChannel})},a.disableTrade=function(){var e=document.querySelector("button.trade1");0==e.disabled&&(e.removeEventListener("click",a.tradeListener1),e.setAttribute("disabled","true"));var t=document.querySelector("button.trade2");0==t.disabled&&(t.removeEventListener("click",a.tradeListener2),t.setAttribute("disabled","true"));var r=document.querySelector("button.trade3");0==r.disabled&&(r.removeEventListener("click",a.tradeListener3),r.setAttribute("disabled","true"));var s=document.querySelector("button.trade4");0==s.disabled&&(s.removeEventListener("click",a.tradeListener4),s.setAttribute("disabled","true"))},a.onTrade=function(e){var t,r=[];if(e!=a.props.piece){t="Player "+a.props.piece+" initiated a trade propose to player "+e,r.push(t),a.disableTrade();var s=document.querySelector("button.upgrade");0==s.disabled&&(s.removeEventListener("click",a.upgradeListener),s.setAttribute("disabled","true"));var n=document.querySelector("button.recruit");0==n.disabled&&(n.removeEventListener("click",a.recruitListener),n.setAttribute("disabled","true"));var l=document.querySelector("button.purchase");0==l.disabled&&(l.removeEventListener("click",a.purchaseListener),l.setAttribute("disabled","true")),a.state.deal.trader1=a.state.players[a.props.piece],a.state.deal.trader2=a.state.players[e],a.state.deal.phase="propose",a.state.deal.money1=0,a.state.deal.money2=0,a.state.deal.army1=0,a.state.deal.army2=0,a.state.deal.tiles=[],a.props.pubnub.publish({message:{action:"trade",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:r,deal:a.state.deal},channel:a.props.lobbyChannel})}else x.ToastsStore.error("invalid move")},a.endTurn=function(){var e=document.querySelector("button.endTurn");e.removeEventListener("click",a.endTurnListener),e.setAttribute("disabled","true");var t=document.querySelector("button.upgrade");0==t.disabled&&(t.removeEventListener("click",a.upgradeListener),a.setState({upgradeDisabled:!0}));var r=document.querySelector("button.recruit");0==r.disabled&&(r.removeEventListener("click",a.recruitListener),a.setState({recruitDisabled:!0}));var s=document.querySelector("button.purchase");0==s.disabled&&(s.removeEventListener("click",a.purchaseListener),s.setAttribute("disabled","true")),a.disableTrade();var n=document.querySelector("#tradePanel");0!=n.children.length&&l.a.unmountComponentAtNode(n),a.props.pubnub.hereNow({channels:["mafiaLobby--"+a.props.roomId]}).then(function(e){a.turn=(parseInt(a.turn)+1).toString(),parseInt(a.turn)>e.totalOccupancy&&(a.turn="1"),a.props.pubnub.publish({message:{action:"end turn",piece:a.props.piece,turn:a.turn},channel:a.props.lobbyChannel}),a.checkForWinner()})},a.sendChat=function(){var e=document.querySelector("#chatInput"),t="Player ".concat(a.props.piece,": ").concat(e.value);e.value="",a.props.pubnub.publish({message:{action:"chat",chat:t},channel:a.props.lobbyChannel})};var r=[],n=0;return r.push(new C(n++,"Start",null,null,null)),r.push(new C(n++,"Mediterranean",[2,10,30,90,160,250],[3,3,4,5,6,8],50)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Baltic",[4,20,60,180,320,450],[3,3,4,5,6,8],50)),r.push(new C(n++,"tax",null,null,null)),r.push(new C(n++,"Reading Railroad",[25],[7],50)),r.push(new C(n++,"Oriental",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Vermont",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new C(n++,"Conneticut",[8,40,100,300,450,600],[3,3,4,5,6,8],50)),r.push(new C(n++,"Cargo bay",null,null,null)),r.push(new C(n++,"St.Charles",[10,50,150,450,625,750],[3,3,4,5,6,8],50)),r.push(new C(n++,"Electric Company",[100],[5],50)),r.push(new C(n++,"States",[10,20,50,150,450,625,750],[3,3,4,5,6,8],100)),r.push(new C(n++,"Virginia",[12,60,180,500,700,900],[3,3,4,5,6,8],100)),r.push(new C(n++,"Penn Railroad",[25],[7],50)),r.push(new C(n++,"St.James",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Tennesee",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new C(n++,"New York",[16,80,220,600,800,1e3],[3,3,4,5,6,8],100)),r.push(new C(n++,"Free Stay",null,null,null)),r.push(new C(n++,"Kentucky",[18,36,90,250,700,875],[4,4,5,6,7,8],150)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Indiana",[18,90,250,700,875,1050],[4,4,5,6,7,8],150)),r.push(new C(n++,"Illinois",[20,100,300,750,925,1100],[4,4,5,6,7,8],150)),r.push(new C(n++,"B & O Railroad",[25],[7],50)),r.push(new C(n++,"Atlantic",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new C(n++,"Ventnor",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new C(n++,"Water Works",[100],[5],null)),r.push(new C(n++,"Marvin",[24,48,120,360,850,1025,1200],[4,4,5,6,7,8],150)),r.push(new C(n++,"Cargo bay",null,null,null)),r.push(new C(n++,"Pacific",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new C(n++,"N. Carolina",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Pennsylvania",[28,150,450,1e3,1200,1400],[5,5,6,6,7,9],200)),r.push(new C(n++,"Short Line Railroad",[25],[7],50)),r.push(new C(n++,"?",null,null,null)),r.push(new C(n++,"Park",[35,175,500,1100,1300,1500],[6,6,7,7,9,10],200)),r.push(new C(n++,"tax",null,null,null)),r.push(new C(n++,"Broad Walk",[50,200,600,1400,1700,2e3],[6,6,7,7,9,10],200)),a.state={skewed:"skewed",squares:r,players:[new q(0),new q(1),new q(2),new q(3),new q(4)],leftOffsets:[null,1,4,4,1],topOffsets:[null,1,4,1,4],buyPrices:[null,60,null,60,null,200,100,null,100,120,null,140,150,140,160,200,180,null,180,200,null,220,null,220,240,200,260,260,150,280,null,300,300,null,320,200,null,350,null,400],provinces:[null,"brown",null,"brown","null","black","aqua",null,"aqua","aqua",null,"pink","silver","pink","pink","black","orange",null,"orange","orange",null,"red",null,"red","red","black","yellow","yellow","silver","yellow",null,"green","green",null,"green","black",null,"darkblue",null,"darkblue"],specials:[0,2,4,7,10,17,20,22,30,33,36,38],neighbors:{1:[1,3],3:[1,3],6:[6,8,9],8:[6,8,9],9:[6,8,9],11:[11,13,14],13:[11,13,14],14:[11,13,14],16:[16,18,19],18:[16,18,19],19:[16,18,19],21:[21,23,24],23:[21,23,24],24:[21,23,24],26:[26,27,29],27:[26,27,29],29:[26,27,29],31:[31,32,34],32:[31,32,34],34:[31,32,34],37:[37,39],39:[37,39],12:[12,28],28:[12,28],5:[5,15,25,35],15:[5,15,25,35],25:[5,15,25,35],35:[5,15,25,35]},selectedTiles:[],deal:{trader1:new q(0),trader2:new q(0),phase:"default",money1:0,money2:0,tiles:[]},upgradeDisabled:!0,recruitDisabled:!0},a.turn="1",a.gameOver=!1,a.counter=0,a.begin=!0,a.armyPrice=100,a.maintenenceCharge=20,a.unloadCharge=50,a.winCondition={money:2500},a.turnCount=1,a.goListener=function(){a.onMove()},a.payListener=function(){a.onPay()},a.purchaseListener=function(){a.onPurchase()},a.endTurnListener=function(){a.endTurn()},a.upgradeListener=function(){a.onUpgrade()},a.assaultListener=function(){a.onAssault()},a.recruitListener=function(){a.onRecruit()},a.tradeListener1=function(){a.onTrade(1)},a.tradeListener2=function(){a.onTrade(2)},a.tradeListener3=function(){a.onTrade(3)},a.tradeListener4=function(){a.onTrade(4)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"animate2Dice",value:function(e,t){var a=document.createElement("div"),r=document.createElement("div");a.style.left="-20vmin",r.style.left="-10vmin",a.style.top="50vmin",r.style.top="50vmin",a.classList.add("animation"),r.classList.add("animation"),a.classList.add("dice"+e),r.classList.add("dice"+t),a.style.opacity="0",r.style.opacity="0";var s=document.querySelector(".game");s.appendChild(a),s.appendChild(r),setTimeout(function(){a.style.left=parseInt(a.style.left)+50+"vmin",r.style.left=parseInt(r.style.left)+50+"vmin",a.style.opacity="1",r.style.opacity="1",setTimeout(function(){a.style.left=parseInt(a.style.left)+50+"vmin",r.style.left=parseInt(r.style.left)+50+"vmin",a.style.opacity="0",r.style.opacity="0",setTimeout(function(){s.removeChild(a),s.removeChild(r)},1e3)},1e3)},100)}},{key:"animateCombat",value:function(e,t){var a=document.querySelector(".game"),r=-20,s=120,n=!0,l=!1,i=void 0;try{for(var o,c=function(){var t=o.value,s=document.createElement("div");s.style.left=r+"vmin",r-=10,s.classList.add("animation"),s.classList.add("dice"+t),s.style.top="40vmin",s.style.opacity="0",a.appendChild(s),setTimeout(function(){s.style.left=parseInt(s.style.left)+50+10*e.length+"vmin",s.style.opacity="1",setTimeout(function(){s.style.left=parseInt(s.style.left)+50+10*e.length+"vmin",s.style.opacity="0",setTimeout(function(){a.removeChild(s)},1e3)},3e3)},100)},u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)c()}catch(v){l=!0,i=v}finally{try{n||null==u.return||u.return()}finally{if(l)throw i}}var p=!0,d=!1,m=void 0;try{for(var y,h=function(){var e=y.value,r=document.createElement("div");r.style.left=s+"vmin",s+=10,r.classList.add("animation"),r.classList.add("blueDice"+e),r.style.top="60vmin",r.style.opacity="0",a.appendChild(r),setTimeout(function(){r.style.left=parseInt(r.style.left)-50-10*t.length+"vmin",r.style.opacity="1",setTimeout(function(){r.style.left=parseInt(r.style.left)-50-10*t.length+"vmin",r.style.opacity="0",setTimeout(function(){a.removeChild(r)},1e3)},3e3)},100)},b=t[Symbol.iterator]();!(p=(y=b.next()).done);p=!0)h()}catch(v){d=!0,m=v}finally{try{p||null==b.return||b.return()}finally{if(d)throw m}}}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({skewed:""})},500),this.props.pubnub.getMessage(this.props.lobbyChannel,function(t){if(console.log("turn ",t.message.turn," player ",e.props.piece,", action: ",t.message.action),t.message.animation)"move"==t.message.animation?(e.animate2Dice(t.message.dices[0],t.message.dices[1]),setTimeout(function(){e.movePawn(t.message.piece,t.message.newIdx),setTimeout(function(){if(t.message.toasts){var a=!0,r=!1,s=void 0;try{for(var n,l=t.message.toasts[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){var i=n.value;e.updateChat(i)}}catch(u){r=!0,s=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}}if(t.message.toasts){var o=t.message.toasts;x.ToastsStore.info(o.splice(0,1),4e3);var c=setInterval(function(){0==o.length?clearInterval(c):x.ToastsStore.info(o.splice(0,1),4e3)},1e3)}},1e3)},2e3)):"combat"==t.message.animation&&e.animateCombat(t.message.dices1,t.message.dices2);else if(t.message.toasts&&t.message.toasts.length>0){var a=!0,r=!1,s=void 0;try{for(var n,l=t.message.toasts[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){var i=n.value;e.updateChat(i)}}catch(u){r=!0,s=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var o=t.message.toasts;x.ToastsStore.info(o.splice(0,1),4e3);var c=setInterval(function(){0==o.length?clearInterval(c):x.ToastsStore.info(o.splice(0,1),4e3)},1e3)}"chat"==t.message.action&&e.updateChat(t.message.chat),"end turn"==t.message.action&&e.newTurn(t.message.turn),"trade"!=t.message.action&&"endTrade"!=t.message.action||e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts,t.message.deal),e.turn!=e.props.piece&&("move"==t.message.action?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):["purchase","pay","upgrade","recruit","assault"].includes(t.message.action)?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts,t.message.deal):console.log(t.message)),"victory"==t.message.action&&alert("A victor has emerged!")}),l.a.findDOMNode(this).addEventListener("click",this.showDetail),document.getElementById("chatInput").addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&document.getElementById("sendChat").click()})}},{key:"showDetail",value:function(e){console.table("clicked: "+e.target.classList);for(var t,a=document.querySelectorAll(".square"),r=0,s=Array.from(a);r<s.length;r++){s[r].classList.remove("showDetail")}e.target.classList.contains("square")?t=e.target:e.target.classList.contains("face")?t=e.target.parentElement:e.target.parentElement.classList.contains("face")&&(t=e.target.parentElement.parentElement),t&&t.classList.add("showDetail")}},{key:"onMove",value:function(){var e=Object(h.a)(y.a.mark(function e(){var t,a,r,s,n,l,i,o,c,u,p,d,m,h,b,v,f,E,g,w,k,S,C,q,L,T;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.begin=!1,t=[],this.turn!==this.props.piece){e.next=35;break}return r=!1,s=parseInt(6*Math.random())+1,n=parseInt(6*Math.random())+1,l=this.state.players[this.props.piece],this.state.players[this.props.piece].position,(i=this.state.players[this.props.piece].position+s+n)>39&&(r=!0),i%=40,o=this.state.squares[i],l.position=i,a="Player ".concat(this.props.piece," rolled a ").concat(s," and a ").concat(n,", moved to ").concat(this.state.squares[i].name),t.push(a),(c=document.querySelector("button.go")).removeEventListener("click",this.goListener),c.setAttribute("disabled","true"),this.props.pubnub.publish({message:{action:"move",turn:this.turn,piece:this.props.piece,newIdx:i,players:this.state.players,squares:this.state.squares,toasts:t,animation:"move",dices:[s,n]},channel:this.props.lobbyChannel}),e.next=21,N.a.set(3500);case 21:t=[],r&&(l.money=l.money+200,a="Player ".concat(this.props.piece," passed Start and collected base income $200!"),t.push(a)),1==(u=document.querySelector("button.trade1")).disabled&&(u.addEventListener("click",this.tradeListener1),u.removeAttribute("disabled")),1==(p=document.querySelector("button.trade2")).disabled&&(p.addEventListener("click",this.tradeListener2),p.removeAttribute("disabled")),1==(d=document.querySelector("button.trade3")).disabled&&(d.addEventListener("click",this.tradeListener3),d.removeAttribute("disabled")),1==(m=document.querySelector("button.trade4")).disabled&&(m.addEventListener("click",this.tradeListener4),m.removeAttribute("disabled")),this.state.specials.includes(i)?(0==i||20==i?console.log("nothing happens"):[2,7,17,22,33,36].includes(i)?(a="Random event: ",1==(h=parseInt(6*Math.random())+1)?(l.money=l.money-100,a+="Cops! Player ".concat(this.props.piece," lost $100"),l.money<0&&(l.money=0)):2==h?(l.money=l.money+100,a+="Revenue! Player ".concat(this.props.piece," collected $100!")):3==h?(l.army=l.army-1,a+="Attrition! 1 bodyguard left player ".concat(this.props.piece,"!"),l.army<0&&(l.army=0,a="Random event: Attrition! Player ".concat(this.props.piece," already has 0 bodyguard."))):4==h?(l.army=l.army+1,a+="Volunteer! 1 bodyguard joined player ".concat(this.props.piece,"!")):5==h?(b=l.territory.length*this.maintenenceCharge,l.money-=b,l.money<0&&(l.money=0),a+="Property tax! Player ".concat(this.props.piece," lost $").concat(b,"! ($").concat(this.maintenenceCharge," per property owned)!")):(l.army=l.army+2,a+="Volunteer! 2 bodyguards joined player ".concat(this.props.piece,"!")),t.push(a)):[10,30].includes(i)?(v=l.army*this.unloadCharge,l.money+=v,a="Player ".concat(this.props.piece," earned $").concat(v,"! Every bodyguard earned $").concat(this.unloadCharge," worth of cargo"),t.push(a)):4==i?(f=parseInt(.1*l.money),l.money=l.money-f,a="Player ".concat(this.props.piece," paid 10% tax and lost $").concat(f,"!"),t.push(a)):(E=parseInt(.2*l.money),l.money=l.money-E,a="Player ".concat(this.props.piece," paid 20% tax and lost $").concat(E,"!"),t.push(a)),(g=document.querySelector("button.endTurn")).addEventListener("click",this.endTurnListener),g.disabled=!1):o.owner?o.owner=="player "+this.props.piece?(S=o.rents[o.level]*o.multiplier,l.money+=S,a="Player ".concat(this.props.piece," collected $").concat(S," rent!"),t.push(a),"silver"!=this.state.provinces[i]&&"black"!=this.state.provinces[i]&&((C=document.querySelector("button.upgrade")).addEventListener("click",this.upgradeListener),C.children[0].innerHTML="Upgrade property ($"+o.upgradePrice+")",this.setState({upgradeDisabled:!1})),document.querySelector("button.recruit").addEventListener("click",this.recruitListener),this.setState({recruitDisabled:!1}),(q=document.querySelector("button.endTurn")).addEventListener("click",this.endTurnListener),q.removeAttribute("disabled")):((L=document.querySelector("button.pay")).addEventListener("click",this.payListener),L.children[0].innerHTML="Pay rent ($"+o.rents[o.level]*o.multiplier+")",L.removeAttribute("disabled"),(T=document.querySelector("button.assault")).addEventListener("click",this.assaultListener),T.children[0].innerHTML="Assault property ("+l.army+" vs "+o.guards[o.level]+")",T.removeAttribute("disabled"),this.disableTrade()):((w=document.querySelector("button.purchase")).addEventListener("click",this.purchaseListener),w.removeAttribute("disabled"),w.children[0].innerHTML="Purchase property ($"+this.state.buyPrices[o.num]+")",(k=document.querySelector("button.endTurn")).addEventListener("click",this.endTurnListener),k.removeAttribute("disabled")),this.props.pubnub.publish({message:{action:"move",turn:this.turn,piece:this.props.piece,newIdx:i,players:this.state.players,squares:this.state.squares,toasts:t},channel:this.props.lobbyChannel}),e.next=36;break;case 35:x.ToastsStore.error("invalid move");case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onAssault",value:function(){var e=Object(h.a)(y.a.mark(function e(){var t,a,r,s,n,l,i,o,c,u,p,d,m,h,b,v,f;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.players[this.props.piece],a=this.state.players[this.props.piece].position,r=this.state.squares[a],this.state.players[r.owner[r.owner.length-1]],n=[],this.turn!==this.props.piece||!r.owner||r.owner=="player "+this.props.piece){e.next=64;break}return l=this.state.players[r.owner[r.owner.length-1]],i=this.siege(t,l,a),this.props.pubnub.publish({message:{turn:this.turn,piece:this.props.piece,players:this.state.players,squares:this.state.squares,animation:"combat",dices1:i.attackDices,dices2:i.defendDices,siegeSuccess:i.attackTotal>i.defendTotal},channel:this.props.lobbyChannel}),e.next=11,N.a.set(2e3);case 11:if(s="{Player ".concat(t.number," attacked with x").concat(t.army," bodyguards against x").concat(r.guards[r.level]," defenders"),n.push(s),s="{Player ".concat(t.number," threw :").concat(i.attackDices.join(", "),", totalling ").concat(i.attackTotal,"}"),n.push(s),s="{Player ".concat(l.number," threw :").concat(i.defendDices.join(", "),", totalling ").concat(i.defendTotal,"}"),n.push(s),o=document.querySelector("button.pay"),c=document.querySelector("button.assault"),u=document.querySelector("button.endTurn"),p=parseInt(t.army/2),!(i.attackTotal>i.defendTotal)){e.next=44;break}r.owner="player "+t.number,t.territory.push(a),d=!1,e.t0=y.a.keys(l.territory);case 26:if((e.t1=e.t0()).done){e.next=34;break}if(m=e.t1.value,l.territory[m]!=a){e.next=32;break}return l.territory.splice(m,1),d=!0,e.abrupt("break",34);case 32:e.next=26;break;case 34:d||alert("tile not found"),[5,15,25,35].includes(a)&&(t.railsOwned+=1,l.railsOwned-=1),this.checkMonopoly(a),s="{Tile ".concat(this.state.squares[a].name," now belongs to player ").concat(t.number,"}"),n.push(s),o.removeEventListener("click",this.payListener),o.setAttribute("disabled","true"),u.addEventListener("click",this.endTurnListener),u.removeAttribute("disabled");case 44:t.army-=p,c.removeEventListener("click",this.assaultListener),c.setAttribute("disabled","true"),s="{Player ".concat(t.number," lost ").concat(p," bodyguards}"),n.push(s),c.removeEventListener("click",this.assaultListener),c.setAttribute("disabled","true"),1==(h=document.querySelector("button.trade1")).disabled&&(h.addEventListener("click",this.tradeListener1),h.removeAttribute("disabled")),1==(b=document.querySelector("button.trade2")).disabled&&(b.addEventListener("click",this.tradeListener2),b.removeAttribute("disabled")),1==(v=document.querySelector("button.trade3")).disabled&&(v.addEventListener("click",this.tradeListener3),v.removeAttribute("disabled")),1==(f=document.querySelector("button.trade4")).disabled&&(f.addEventListener("click",this.tradeListener4),f.removeAttribute("disabled")),this.props.pubnub.publish({message:{action:"assault",turn:this.turn,piece:this.props.piece,players:this.state.players,squares:this.state.squares,toasts:n},channel:this.props.lobbyChannel}),e.next=65;break;case 64:x.ToastsStore.error("invalid move");case 65:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t;return console.log("render"),window.onbeforeunload=function(e){return"Leaving the page will end the game."},window.onunload=function(e){return"Leaving the page will end the game."},e="".concat(this.props.piece==this.turn?"Your turn":"Opponent's turn"),t=this.props.piece==this.turn&&this.begin&&"1"==this.props.piece?s.a.createElement("button",{className:"go",onClick:this.goListener},s.a.createElement("p",null,"GO!"),s.a.createElement("div",null,"\ud83c\udfb2"),s.a.createElement("div",null,"\ud83c\udfb2")):s.a.createElement("button",{className:"go",disabled:!0},s.a.createElement("p",null,"GO!"),s.a.createElement("div",null,"\ud83c\udfb2"),s.a.createElement("div",null,"\ud83c\udfb2")),s.a.createElement("div",{className:v()("game",this.state.skewed)},s.a.createElement("div",{className:"board"},s.a.createElement(E,{piece:this.props.piece,squares:this.state.squares,buyPrices:this.state.buyPrices,provinces:this.state.provinces,specials:this.state.specials})),s.a.createElement("div",{className:"pawn",id:"pawn1"},"1"),s.a.createElement("div",{className:"pawn",id:"pawn2"},"2"),s.a.createElement("div",{className:"pawn",id:"pawn3"},"3"),s.a.createElement("div",{className:"pawn",id:"pawn4"},"4"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"game-info"},s.a.createElement("div",{className:"status-info"},e),s.a.createElement("p",null,"RoomID: ",this.props.roomId),s.a.createElement("p",null,"You are player ",s.a.createElement("i",null,this.props.piece)),s.a.createElement("p",null,"Reaches $",this.winCondition.money," to win."),s.a.createElement("p",null,"Try clicking on the properties.")),s.a.createElement(x.ToastsContainer,{store:x.ToastsStore}),t,s.a.createElement("button",{className:"purchase",disabled:!0},s.a.createElement("p",null,"Purchase property")),s.a.createElement("button",{className:"pay",disabled:!0},s.a.createElement("p",null,"Pay rent")),s.a.createElement("button",{className:"upgrade",disabled:this.state.upgradeDisabled},s.a.createElement("p",null,"Upgrade property")),s.a.createElement("button",{className:"recruit",disabled:this.state.recruitDisabled},s.a.createElement("p",null,"Recruit bodyguard ($",this.armyPrice,")")),s.a.createElement("button",{className:"assault",disabled:!0},s.a.createElement("p",null,"Assault property")),s.a.createElement("br",null),s.a.createElement("button",{className:"trade1",disabled:!0},s.a.createElement("p",null,"Trade: player 1")),s.a.createElement("button",{className:"trade2",disabled:!0},s.a.createElement("p",null,"Trade: player 2")),s.a.createElement("button",{className:"trade3",disabled:!0},s.a.createElement("p",null,"Trade: player 3")),s.a.createElement("button",{className:"trade4",disabled:!0},s.a.createElement("p",null,"Trade: player 4")),s.a.createElement("button",{className:"endTurn",disabled:!0},s.a.createElement("p",null,"End turn!")),s.a.createElement("div",{className:"bottomPanel"},s.a.createElement("div",{className:"playersInfoWrapper"},s.a.createElement("div",{className:"playersInfo"},"player 1",s.a.createElement("br",null),"properties: ",this.state.players[1].territory.length,s.a.createElement("br",null),"bodyguards: ",this.state.players[1].army,s.a.createElement("br",null),"money: $",this.state.players[1].money),s.a.createElement("div",{className:"playersInfo"},"player 2",s.a.createElement("br",null),"properties: ",this.state.players[2].territory.length,s.a.createElement("br",null),"bodyguards: ",this.state.players[2].army,s.a.createElement("br",null),"money: $",this.state.players[2].money,s.a.createElement("br",null)),s.a.createElement("div",{className:"playersInfo"},"player 3",s.a.createElement("br",null),"properties: ",this.state.players[3].territory.length,s.a.createElement("br",null),"bodyguards: ",this.state.players[3].army,s.a.createElement("br",null),"money: $",this.state.players[3].money),s.a.createElement("div",{className:"playersInfo"},"player 4",s.a.createElement("br",null),"properties: ",this.state.players[4].territory.length,s.a.createElement("br",null),"bodyguards: ",this.state.players[4].army,s.a.createElement("br",null),"money: $",this.state.players[4].money,s.a.createElement("br",null))),s.a.createElement("div",{id:"tradePanel"})),s.a.createElement("div",{className:"chatArea"},s.a.createElement("div",{className:"chatInputArea"},s.a.createElement("input",{type:"text",id:"chatInput"}),s.a.createElement("button",{id:"sendChat",onClick:this.sendChat},"send")),s.a.createElement("textarea",{rows:"4",cols:"50",id:"chats",disabled:!0}))),s.a.createElement("div",{className:"rules"},s.a.createElement("p",null,"Help:"),s.a.createElement("p",null,"Upgrade property to charge more rent and station more defending guards. "),s.a.createElement("p",null,"Or hire a bodyguard for $",this.armyPrice," that follows you for when going to your owned property. "),s.a.createElement("p",null,"Don't want to pay rent? Take it by force by assaulting with your bodyguards to fight this property's guards! You lose half bodyguards no matter win or loss."),s.a.createElement("p",null,"Your bodyguards follow your pawn, while guards stay with the property."),s.a.createElement("p",null,"If you attack with 3 bodyguards and the property has 4 guards, you throw dices against their 4 dices, the side with more total points wins. Same points defender wins."),s.a.createElement("p",null,"Your own properties will be show its name in your color. The rents/guards of the current level are shown in color. They go higher as you level up the property."),s.a.createElement("p",null,"Lands with the same border color are in the same province. Owning all of them will double their rents.")))}}]),t}(s.a.Component)),T=a(24),A=a.n(T),P=(a(53),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPressCreate=function(e){a.roomId=parseInt(1e5*Math.random()).toString(10),a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),k.a.fire({position:"top",allowOutsideClick:!1,title:"Ask your friends to join with room ID:"+a.roomId,width:275,height:500,padding:"0.7em"}),a.setState({piece:"1",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},a.onPressJoin=function(e){k.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"blue",confirmButtonText:"OK",width:275,padding:"0.7em"}).then(function(e){e.value&&a.joinRoom(e.value)})},a.joinRoom=function(e){a.roomId=e,a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.hereNow({channels:[a.lobbyChannel],withPresence:!0}).then(function(e){console.log(e),alert("Current players in the room: "+e.totalOccupancy),e.totalOccupancy<4?(a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),a.setState({piece:(1+e.totalOccupancy).toString()}),a.pubnub.publish({message:{notRoomCreator:!0},channel:a.lobbyChannel})):k.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},a.endGame=function(){a.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),a.lobbyChannel=null,a.roomId=null,a.pubnub.unsubscribe({channels:[a.lobbyChannel]})};var r=parseInt(1e5*Math.random()).toString(10);return a.pubnub=new A.a({publishKey:"pub-c-643517bb-6314-4b6f-8fc1-3662e31f005e",subscribeKey:"sub-c-dd3832b8-1251-11ea-9dda-ea5a03b00545",uuid:r}),console.log("uuid: "+r),a.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},a.lobbyChannel=null,a.roomId=null,a.pubnub.init(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.notRoomCreator&&(e.lobbyChannel="mafiaGame--"+e.roomId,e.pubnub.subscribe({channels:[e.lobbyChannel]}),e.setState({isPlaying:!0}),k.a.close())})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,!this.state.isPlaying&&s.a.createElement("div",{className:"game"},s.a.createElement("div",{className:"button-container"},s.a.createElement("p",null,"This is Mafia Wars! "),s.a.createElement("p",null,"Latest patch: combat dice animation."),s.a.createElement("p",null,"It's a monopoly game in which you can hire bodyguards and take other players' properties by force! "),s.a.createElement("p",null,'The combat mechanism is like Risk, You fight with "bodyguard" number of dices against "guards" number of dices, the one with more total points wins!'),s.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),s.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join"),s.a.createElement("p",null,"How to start a game: "),s.a.createElement("p",null,"1 player creates the room, the game will appear when another player joins."),s.a.createElement("p",null,"If there are more than 2 players, please join room one player at a time to avoid crashes. "),s.a.createElement("p",null,"Refreshing the page will end the game."),s.a.createElement("p",null,"To restart, everyone needs to refresh and start over from this page."),s.a.createElement("p",null,"You can open another browser tab and join as another player."))),this.state.isPlaying&&s.a.createElement(L,{roomId:this.roomId,pubnub:this.pubnub,lobbyChannel:this.lobbyChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,endGame:this.endGame}))}}]),t}(r.Component));l.a.render(s.a.createElement(P,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.7e529359.chunk.js.map