(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},17:function(e,t,a){e.exports=a(52)},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),l=a.n(s),o=a(2),i=a(6),c=a(8),u=a(7),p=a(11),m=a(9),d=a(4),h=a.n(d),y=(a(13),function(e){var t,a;if(e.special)0==e.num?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)),a=n.a.createElement("div",{className:h()("detail",e.provinceColor)},n.a.createElement("b",null,e.name),n.a.createElement("br",null),"Collect $200!")):[2,7,17,22,33,36].includes(e.num)?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",{className:"random"},"?")),a=n.a.createElement("div",{className:h()("detail",e.provinceColor)},n.a.createElement("b",null,e.name),n.a.createElement("br",null))):20==e.num?t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)):[10,30].includes(e.num)?(t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null)),a=n.a.createElement("div",{className:h()("detail",e.provinceColor)},"#",e.num,n.a.createElement("br",null),"Fight thugs of equal numbers, winner takes $200!")):t=4==e.num?n.a.createElement("div",{className:"face"},n.a.createElement("b",null,"10% tax!")):n.a.createElement("div",{className:"face"},n.a.createElement("b",null,"20% tax!"));else{t=n.a.createElement("div",{className:"face"},n.a.createElement("b",null,e.name),n.a.createElement("br",null),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),n.a.createElement("div",{className:h()("owner",e.playerColor)},e.owner?"owner: "+e.owner:null),n.a.createElement("br",null),e.level?"level: "+e.level:null);var r=[],s=[];if(e.rents)for(var l in e.rents)l==e.level?r.push(n.a.createElement("b",null,"$",e.rents[l]*e.multiplier)):r.push(n.a.createElement("p",null,"$",e.rents[l]*e.multiplier));if(e.garrisons)for(var o in e.garrisons)o==e.level?s.push(n.a.createElement("b",null,e.garrisons[o])):s.push(n.a.createElement("p",null,e.garrisons[o]));a=n.a.createElement("div",{className:h()("detail",e.provinceColor)},n.a.createElement("b",null,e.name),n.a.createElement("br",null),n.a.createElement("b",null,"Buy price: "),e.buyPrice?"$"+e.buyPrice:null,n.a.createElement("br",null),e.owner?"owner: "+e.owner:null,n.a.createElement("b",null,"rents: "),n.a.createElement("br",null),r,n.a.createElement("br",null),n.a.createElement("b",null,"garrisons: "),n.a.createElement("br",null),s,n.a.createElement("br",null),e.upgradePrice?"upgrade price: "+e.upgradePrice:null)}return n.a.createElement("div",{className:h()("square",e.styleName),id:e.id},t,n.a.createElement("div",{className:h()("province",e.provinceColor)}),a)}),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).playerColors=[null,"redText","blueText","purpleText","greenText"],a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"createBoard",value:function(){var e=[];e.push(n.a.createElement("div",{className:"center"},n.a.createElement("h1",{className:"title"},"Mafia Wars")));var t=this.renderSquare(0,"corner");e.push(t);for(var a=[],r=1;r<10;r++)a.push(this.renderSquare(r));e.push(n.a.createElement("div",{className:"row horizontal-row top-row"},a)),t=this.renderSquare(10,"corner"),e.push(t),a=[];for(var s=11;s<20;s++)a.push(this.renderSquare(s));e.push(n.a.createElement("div",{className:"row vertical-row right-row"},a)),t=this.renderSquare(30,"corner"),e.push(t),a=[];for(var l=29;l>20;l--)a.push(this.renderSquare(l));e.push(n.a.createElement("div",{className:"row horizontal-row bottom-row"},a)),t=this.renderSquare(20,"corner"),e.push(t),a=[];for(var o=39;o>30;o--)a.push(this.renderSquare(o));return e.push(n.a.createElement("div",{className:"row vertical-row left-row"},a)),e}},{key:"renderSquare",value:function(e,t){var a="white";if(this.props.squares[e]&&this.props.squares[e].owner){var r=this.props.squares[e].owner;a=this.playerColors[r[r.length-1]]}return n.a.createElement(y,{key:e,id:"square"+e,num:e,name:this.props.squares[e]?this.props.squares[e].name:null,multiplier:this.props.squares[e]?this.props.squares[e].multiplier:1,special:this.props.specials.includes(e),buyPrice:this.props.buyPrices[e],styleName:t,provinceColor:this.props.provinces[e],playerColor:a,owner:this.props.squares[e]?this.props.squares[e].owner:null,rents:this.props.squares[e]?this.props.squares[e].rents:null,garrisons:this.props.squares[e]?this.props.squares[e].garrisons:null,upgradePrice:this.props.squares[e]?this.props.squares[e].upgradePrice:null,level:this.props.squares[e]?this.props.squares[e].level:null,visitors:this.props.squares[e]?this.props.squares[e].visitors:null})}},{key:"render",value:function(){return n.a.createElement("div",null,this.createBoard())}}]),t}(n.a.Component),v=a(3),f=a.n(v),g=function e(t,a,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;Object(o.a)(this,e),this.num=t,this.name=a,this.owner=null,this.rents=r||[10,20,40,80],this.garrisons=n||[4,5,6,8],this.upgradePrice=s,this.level=0,this.multiplier=1},w=function e(t){Object(o.a)(this,e),this.number=t,this.army=1,this.money=1500,this.territory=[],this.position=0,this.railsOwned=0},E=a(1),q=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).newRound=function(e){var t=null===e?"Tie game!":"Player ".concat(e," won!");!1===a.props.isRoomCreator&&a.gameOver?(f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"blue",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),a.turn="1"):a.props.isRoomCreator&&a.gameOver&&f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Continue Playing?",showCancelButton:!0,confirmButtonColor:"blue",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then(function(e){e.value?a.props.pubnub.publish({message:{reset:!0},channel:a.props.gameChannel}):a.props.pubnub.publish({message:{endGame:!0},channel:a.props.gameChannel})})},a.announceWinner=function(e){},a.checkForWinner=function(e){},a.newTurn=function(e){a.turn=e;var t=document.getElementsByClassName("status-info")[0];if(t.innerHTML="Player "+a.turn+"'s turn",a.turn==a.props.piece){console.log(a.turn,a.props.piece,"new turn"),t.innerHTML="Your turn!";var r=document.querySelector("button.go");r.addEventListener("click",a.goListener),r.disabled=!1}},a.updateBoard=function(e,t,r,n,s){var l=!0,o=!1,i=void 0;try{for(var c,u=s[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var p=c.value;E.ToastsStore.success(p,1e4)}}catch(d){o=!0,i=d}finally{try{l||null==u.return||u.return()}finally{if(o)throw i}}if(a.setState(function(){return{squares:n}}),a.setState(function(){return{players:r}}),"move"==e){var m=document.querySelector("#pawn".concat(t));a.movePawn(t,m,a.state.players[t].position)}},a.checkMonopoly=function(e){var t=a.state.neighbors[e],r=t.splice(0,1),n=a.state.squares[t[0]].owner;if("black"==r){var s=!0,l=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(s=(i=c.next()).done);s=!0){var u=i.value,p=a.state.squares[u];if(p.owner){var m=a.state.players[p.owner[p.owner.length-1]].railsOwned;a.state.squares[u].multiplier=Math.pow(2,m-1)}}}catch(R){l=!0,o=R}finally{try{s||null==c.return||c.return()}finally{if(l)throw o}}}else{var d=!0,h=!1,y=void 0;try{for(var b,v=t[Symbol.iterator]();!(d=(b=v.next()).done);d=!0){var f=b.value;if(a.state.squares[f].owner!=n){var g=!0,w=!1,E=void 0;try{for(var q,S=t[Symbol.iterator]();!(g=(q=S.next()).done);g=!0){var k=q.value;a.state.squares[k].multiplier=1}}catch(R){w=!0,E=R}finally{try{g||null==S.return||S.return()}finally{if(w)throw E}}}}}catch(R){h=!0,y=R}finally{try{d||null==v.return||v.return()}finally{if(h)throw y}}if("silver"==r){var C=!0,T=!1,P=void 0;try{for(var L,N=t[Symbol.iterator]();!(C=(L=N.next()).done);C=!0){var O=L.value;a.state.squares[O].multiplier=3}}catch(R){T=!0,P=R}finally{try{C||null==N.return||N.return()}finally{if(T)throw P}}}else{var I=!0,x=!1,A=void 0;try{for(var j,B=t[Symbol.iterator]();!(I=(j=B.next()).done);I=!0){var M=j.value;a.state.squares[M].multiplier=2}}catch(R){x=!0,A=R}finally{try{I||null==B.return||B.return()}finally{if(x)throw A}}}}},a.movePawn=function(e,t,r){var n=document.querySelector("#square".concat(r));t.style.left=a.state.leftOffsets[e]+n.offsetLeft+"px",t.style.top=a.state.topOffsets[e]+n.offsetTop+"px"},a.onMove=function(){a.begin=!1;var e=[];if(a.turn===a.props.piece){var t=parseInt(6*Math.random())+1,r=parseInt(6*Math.random())+1,n=a.state.players[a.props.piece],s=a.state.players[a.props.piece].position,l=a.state.players[a.props.piece].position+t+r;if(l>39){n.money=n.money+200;var o="Player ".concat(a.props.piece," passed Start and collected $200!");E.ToastsStore.success(o,1e4),e.push(o)}l%=40;var i=a.state.squares[l];n.position=l;var c=document.querySelector("#pawn".concat(a.props.piece));a.movePawn(a.props.piece,c,l);var u="Player ".concat(a.props.piece," rolled a ").concat(t," and a ").concat(r,", moved from tile #").concat(s," to tile #").concat(l);E.ToastsStore.success(u,1e4),e.push(u);var p=document.querySelector("button.go");if(p.removeEventListener("click",a.goListener),p.disabled=!0,a.state.specials.includes(l)){if(0==l||20==l)console.log("nothing happens");else if([2,7,17,22,33,36].includes(l)){u="Random event: ";var m=parseInt(6*Math.random())+1;1==m?(n.money=n.money-100,u+="Cops! Player ".concat(a.props.piece," lost $100"),n.money<0&&(u+=" and bankrupted!",alert("game over"))):2==m?(n.money=n.money+100,u+="Revenue! Player ".concat(a.props.piece," collected $100!")):3==m?(n.army=n.army-1,u+="Attrition! 1 gangster left player ".concat(a.props.piece,"!"),n.army<0&&(n.army=0,u="Random event: Attrition! Player ".concat(a.props.piece," already has 0 gangster."))):4==m?(n.army=n.army+1,u+="Volunteer! 1 gangster joined player ".concat(a.props.piece,"!")):5==m?(n.money=n.money+150,u+="Revenue! Player ".concat(a.props.piece," collected $150!")):(n.army=n.army+2,u+="Volunteer! 2 gangsters joined player ".concat(a.props.piece,"!")),E.ToastsStore.success(u,1e4),e.push(u)}else if([10,30].includes(l)){u="Player ".concat(a.props.piece," ran into thugs! Winner takes $200!"),E.ToastsStore.success(u,1e4),e.push(u);var d=a.streetFight(n);u="Player ".concat(a.props.piece," threw ").concat(d.attackDices,"! Thugs threw ").concat(d.defendDices),E.ToastsStore.success(u,1e4),e.push(u),u=d.attackTotal>d.defendTotal?"Player ".concat(a.props.piece," victory! Player ").concat(a.props.piece," collected $200!"):"Thugs victory! Player ".concat(a.props.piece," got robbed $200!"),E.ToastsStore.success(u,1e4),e.push(u)}else if(4==l){var h=parseInt(.1*n.money);n.money=n.money-h,u="Player ".concat(a.props.piece," paid 10% tax and lost $").concat(h,"!"),E.ToastsStore.success(u,1e4),e.push(u)}else{var y=parseInt(.2*n.money);n.money=n.money-y,u="Player ".concat(a.props.piece," paid 20% tax and lost $").concat(y,"!"),E.ToastsStore.success(u,1e4),e.push(u)}var b=document.querySelector("button.endTurn");b.addEventListener("click",a.endTurnListener),b.disabled=!1}else if(i.owner)if(i.owner=="player "+a.props.piece){if("silver"!=a.state.provinces[l]&&"black"!=a.state.provinces[l]){var v=document.querySelector("button.upgrade");v.addEventListener("click",a.upgradeListener),v.disabled=!1}var f=document.querySelector("button.recruit");f.addEventListener("click",a.recruitListener),f.disabled=!1;var g=document.querySelector("button.endTurn");g.addEventListener("click",a.endTurnListener),g.disabled=!1}else{var w=document.querySelector("button.pay");w.addEventListener("click",a.payListener),w.disabled=!1;var q=document.querySelector("button.assault");q.addEventListener("click",a.assaultListener),q.disabled=!1}else{var S=document.querySelector("button.purchase");S.addEventListener("click",a.purchaseListener),S.disabled=!1;var k=document.querySelector("button.endTurn");k.addEventListener("click",a.endTurnListener),k.disabled=!1}a.props.pubnub.publish({message:{action:"move",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:e},channel:a.props.gameChannel})}else E.ToastsStore.error("invalid move")},a.onPurchase=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=[];if(a.turn!=a.props.piece||r.owner)E.ToastsStore.error("invalid move");else{a.state.players[a.props.piece].money<a.state.buyPrices[t]?(e="player "+a.props.piece+" has insufficient money",E.ToastsStore.error(e),n.push(e)):(a.state.players[a.props.piece].money=a.state.players[a.props.piece].money-a.state.buyPrices[t],a.state.players[a.props.piece].territory.push(t),a.state.squares[t].owner="player "+a.props.piece,[5,15,25,35].includes(t)&&(a.state.players[a.props.piece].railsOwned+=1),a.checkMonopoly(t),e="Player ".concat(a.props.piece," purchased tile #").concat(t," for $").concat(a.state.buyPrices[t]),E.ToastsStore.success(e,1e4),n.push(e));var s=document.querySelector("button.purchase"),l=document.querySelector("button.endTurn");s.removeEventListener("click",a.purchaseListener),s.disabled=!0,l.addEventListener("click",a.endTurnListener),l.disabled=!1,a.props.pubnub.publish({message:{action:"purchase",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:n},channel:a.props.gameChannel})}},a.onPay=function(){var e,t=a.state.players[a.props.piece],r=a.state.players[a.props.piece].position,n=a.state.squares[r],s=[];if(a.turn===a.props.piece&&n.owner&&n.owner!="player "+a.props.piece){var l=a.state.players[n.owner[n.owner.length-1]];t.money<n.rents[n.level]?(e="player ".concat(a.props.piece," bankrupts!"),E.ToastsStore.error(e),s.push(e)):(t.money=t.money-n.rents[n.level],l.money=l.money+n.rents[n.level],e="Player ".concat(a.props.piece," paid player ").concat(n.owner[n.owner.length-1]," $").concat(n.rents[n.level]),E.ToastsStore.success(e,1e4),s.push(e));var o=document.querySelector("button.pay"),i=document.querySelector("button.assault"),c=document.querySelector("button.endTurn");i.removeEventListener("click",a.assaultListener),i.disabled=!0,o.removeEventListener("click",a.payListener),o.disabled=!0,c.addEventListener("click",a.endTurnListener),c.disabled=!1,a.props.pubnub.publish({message:{action:"pay",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else E.ToastsStore.error("invalid move")},a.onUpgrade=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=a.state.players[a.props.piece],s=[];if(a.turn===a.props.piece&&r.owner=="player "+a.props.piece){r.level>=6?(e="Tile ".concat(t," is already at max level"),E.ToastsStore.error(e),s.push(e)):n.money<r.upgradePrice?(e="Player ".concat(a.props.piece," has insufficient money"),E.ToastsStore.error(e),s.push(e)):(n.money-=r.upgradePrice,r.level+=1,e="Player ".concat(a.props.piece," updated tile #").concat(t," to level ").concat(r.level),E.ToastsStore.success(e,1e4),s.push(e));var l=document.querySelector("button.upgrade");l.removeEventListener("click",a.upgradeListener),l.disbled=!0,a.props.pubnub.publish({message:{action:"upgrade",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else E.ToastsStore.error("invalid move")},a.streetFight=function(e){for(var t=[],a=[],r=0,n=0,s=0;s<e.army;s++){var l=parseInt(6*Math.random())+1;t.push(l),r+=l}for(var o=0;o<e.army;o++){var i=parseInt(6*Math.random())+1;a.push(i),n+=i}return r>n?e.money+=200:e.money-=200,{attackTotal:r,defendTotal:n,attackDices:t,defendDices:a}},a.siege=function(e,t,r){for(var n,s=a.state.squares[r],l=[],o=[],i=0,c=0,u=0;u<e.army;u++){var p=parseInt(6*Math.random())+1;l.push(p),i+=p}for(var m=0;m<s.garrisons[s.level];m++){var d=parseInt(6*Math.random())+1;o.push(d),c+=d}if(i>c){s.owner="player "+e.number,e.territory.push(r);var h=!1;for(var y in t.territory)if(t.territory[y]==r){t.territory.splice(y,1),h=!0;break}h||alert("tile not found"),[5,15,25,35].includes(r)&&(e.railsOwned-=1,t.railsOwned-=1),a.checkMonopoly(r)}return n=parseInt(e.army/2),e.army-=n,{attackTotal:i,defendTotal:c,attackDices:l,defendDices:o,casualty:n}},a.onAssault=function(){var e,t=a.state.players[a.props.piece],r=a.state.players[a.props.piece].position,n=a.state.squares[r],s=[];if(a.turn===a.props.piece&&n.owner&&n.owner!="player "+a.props.piece){var l=a.state.players[n.owner[n.owner.length-1]],o=a.siege(t,l,r);e="{Player ".concat(t.number," attacked with ").concat(t.army," gangsters against ").concat(n.garrisons[n.level]," defenders"),s.push(e),E.ToastsStore.success(e,1e4),e="{Player ".concat(t.number," threw ").concat(o.attackDices.join(", "),", totalling ").concat(o.attackTotal,"}"),s.push(e),E.ToastsStore.success(e,1e4),e="{Player ".concat(l.number," threw ").concat(o.defendDices.join(", "),", totalling ").concat(o.defendTotal,"}"),s.push(e),E.ToastsStore.success(e,1e4);var i=document.querySelector("button.pay"),c=document.querySelector("button.assault"),u=document.querySelector("button.endTurn");o.attackTotal>o.defendTotal&&(e="{Tile #".concat(r," now belongs to player ").concat(t.number,"}"),s.push(e),E.ToastsStore.success(e,1e4),c.removeEventListener("click",a.assaultListener),c.disabled=!0,i.removeEventListener("click",a.payListener),i.disabled=!0,u.addEventListener("click",a.endTurnListener),u.disabled=!1),e="{Player ".concat(t.number," lost ").concat(o.casualty," gangsters}"),s.push(e),E.ToastsStore.success(e,1e4),c.removeEventListener("click",a.assaultListener),c.disabled=!0,a.props.pubnub.publish({message:{action:"assault",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else E.ToastsStore.error("invalid move")},a.onRecruit=function(){var e,t=a.state.players[a.props.piece].position,r=a.state.squares[t],n=a.state.players[a.props.piece],s=[];if(a.turn===a.props.piece&&r.owner&&r.owner=="player "+a.props.piece){n.money<a.armyPrice?(e="player "+a.props.piece+" has insufficient money",E.ToastsStore.error(e),s.push(e)):(n.money-=a.armyPrice,n.army+=1,e="Player ".concat(a.props.piece," recruited 1 gangster for $").concat(a.armyPrice),E.ToastsStore.success(e,1e4),s.push(e));var l=document.querySelector("button.recruit");l.removeEventListener("click",a.recruitListener),l.disbled=!0,a.props.pubnub.publish({message:{action:"recruit",turn:a.turn,piece:a.props.piece,players:a.state.players,squares:a.state.squares,toasts:s},channel:a.props.gameChannel})}else E.ToastsStore.error("invalid move")},a.endTurn=function(){a.props.pubnub.hereNow({channels:["mafiaLobby--"+a.props.roomId]}).then(function(e){a.turn=(parseInt(a.turn)+1).toString(),a.turn>e.totalOccupancy&&(a.turn="1");var t=document.querySelector("button.endTurn");t.removeEventListener("click",a.endTurnListener),t.disabled=!0;var r=document.querySelector("button.upgrade");0==r.disabled&&(r.removeEventListener("click",a.upgradeListener),r.disabled=!0);var n=document.querySelector("button.recruit");0==n.disabled&&(n.removeEventListener("click",a.recruitListener),n.disabled=!0);var s=document.querySelector("button.purchase");0==s.disabled&&(s.removeEventListener("click",a.purchaseListener),s.disabled=!0),a.props.pubnub.publish({message:{action:"end turn",piece:a.props.piece,turn:a.turn},channel:a.props.gameChannel})})};var r=[],n=0;return r.push(new g(n++,"Start",null,null,null)),r.push(new g(n++,"Mediterranean Ave",[2,10,30,90,160,250],[3,3,4,5,6,8],50)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Baltic Ave",[4,20,60,180,320,450],[3,3,4,5,6,8],50)),r.push(new g(n++,"tax",null,null,null)),r.push(new g(n++,"Reading Railroad",[25],[7],50)),r.push(new g(n++,"Oriental Ave",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Vermont Ave",[6,30,90,270,400,550],[3,3,4,5,6,8],50)),r.push(new g(n++,"Conneticut Ave",[8,40,100,300,450,600],[3,3,4,5,6,8],50)),r.push(new g(n++,"Street thugs",null,null,null)),r.push(new g(n++,"St.Charles Place",[10,50,150,450,625,750],[3,3,4,5,6,8],50)),r.push(new g(n++,"Electric Company",[100],[5],50)),r.push(new g(n++,"States Ave",[10,20,50,150,450,625,750],[3,3,4,5,6,8],100)),r.push(new g(n++,"Virginia Ave",[12,60,180,500,700,900],[3,3,4,5,6,8],100)),r.push(new g(n++,"Pennsylvania Railroad",[25],[7],50)),r.push(new g(n++,"St.James Place",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Tennesee Ave",[14,70,200,550,750,950],[3,3,4,5,6,8],100)),r.push(new g(n++,"New York Ave",[16,80,220,600,800,1e3],[3,3,4,5,6,8],100)),r.push(new g(n++,"Free Stay",null,null,null)),r.push(new g(n++,"Kentucky Ave",[18,36,90,250,700,875],[4,4,5,6,7,8],150)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Indiana Ave",[18,90,250,700,875,1050],[4,4,5,6,7,8],150)),r.push(new g(n++,"Illinois Ave",[20,100,300,750,925,1100],[4,4,5,6,7,8],150)),r.push(new g(n++,"B & O Railroad",[25],[7],50)),r.push(new g(n++,"Atlantic Ave",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new g(n++,"Ventnor Ave",[22,110,330,800,975,1150],[4,4,5,6,7,8],150)),r.push(new g(n++,"Water Works",[100],[5],null)),r.push(new g(n++,"Marvin Gardens",[24,48,120,360,850,1025,1200],[4,4,5,6,7,8],150)),r.push(new g(n++,"Street thugs",null,null,null)),r.push(new g(n++,"Pacific Ave",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new g(n++,"North Carolina Ave",[26,130,390,900,1100,1275],[5,5,6,6,7,9],200)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Pennsylvania Ave",[28,150,450,1e3,1200,1400],[5,5,6,6,7,9],200)),r.push(new g(n++,"Short Line Railroad",[25],[7],50)),r.push(new g(n++,"?",null,null,null)),r.push(new g(n++,"Park Place",[35,175,500,1100,1300,1500],[6,6,7,7,9,10],200)),r.push(new g(n++,"tax",null,null,null)),r.push(new g(n++,"Broad Walk",[50,200,600,1400,1700,2e3],[6,6,7,7,9,10],200)),a.state={squares:r,players:[null,new w(1),new w(2),new w(3),new w(4)],leftOffsets:[null,20,30,20,30],topOffsets:[null,80,50,50,80],buyPrices:[null,60,null,60,null,200,100,null,100,120,null,140,150,140,160,200,180,null,180,200,null,220,null,220,240,200,260,260,150,280,null,300,300,null,320,200,null,350,null,400],provinces:[null,"brown",null,"brown","null","black","aqua",null,"aqua","aqua",null,"pink","silver","pink","pink","black","orange",null,"orange","orange",null,"red",null,"red","red","black","yellow","yellow","silver","yellow",null,"green","green",null,"green","black",null,"darkblue",null,"darkblue"],specials:[0,2,4,7,10,17,20,22,30,33,36,38],neighbors:{1:["brown",1,3],3:["brown",1,3],6:["aqua",6,8,9],8:["aqua",6,8,9],9:["aqua",6,8,9],11:["pink",11,13,14],13:["pink",11,13,14],14:["pink",11,13,14],16:["orange",16,18,19],18:["orange",16,18,19],19:["orange",16,18,19],21:["red",21,23,24],23:["red",21,23,24],24:["red",21,23,24],26:["yellow",26,27,29],27:["yellow",26,27,29],29:["yellow",26,27,29],31:["green",31,32,34],32:["green",31,32,34],34:["green",31,32,34],37:["darkblue",37,39],39:["darkblue",37,39],12:["silver",12,28],28:["silver",12,28],5:["black",5,15,25,35],15:["black",5,15,25,35],25:["black",5,15,25,35],35:["black",5,15,25,35]}},a.turn="1",a.gameOver=!1,a.counter=0,a.begin=!0,a.armyPrice=150,a.goListener=function(){a.onMove()},a.payListener=function(){a.onPay()},a.purchaseListener=function(){a.onPurchase()},a.endTurnListener=function(){a.endTurn()},a.upgradeListener=function(){a.onUpgrade()},a.assaultListener=function(){a.onAssault()},a.recruitListener=function(){a.onRecruit()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,function(t){console.log("turn ",t.message.turn," player ",e.props.piece),e.turn!=e.props.piece&&("move"==t.message.action?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):["purchase","pay","upgrade","recruit","assault"].includes(t.message.action)?e.updateBoard(t.message.action,t.message.piece,t.message.players,t.message.squares,t.message.toasts):"end turn"==t.message.action?e.newTurn(t.message.turn):console.log(t.message))})}},{key:"render",value:function(){var e,t;return console.log("render"),e="".concat(this.props.piece==this.turn?"Your turn":"Opponent's turn"),t=this.props.piece==this.turn&&this.begin&&"1"==this.props.piece?n.a.createElement("button",{className:"go",onClick:this.goListener},"GO!"):n.a.createElement("button",{className:"go",disabled:!0},"GO!"),n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"board"},n.a.createElement(b,{squares:this.state.squares,buyPrices:this.state.buyPrices,provinces:this.state.provinces,specials:this.state.specials})),n.a.createElement("div",{className:"pawn",id:"pawn1"},"player 1"),n.a.createElement("div",{className:"pawn",id:"pawn2"},"player 2"),n.a.createElement("div",{className:"pawn",id:"pawn3"},"player 3"),n.a.createElement("div",{className:"pawn",id:"pawn4"},"player 4"),n.a.createElement("div",{className:"control"},n.a.createElement("p",{className:"status-info"},e),n.a.createElement("div",null,"You are player ",this.props.piece),n.a.createElement(E.ToastsContainer,{store:E.ToastsStore}),t,n.a.createElement("button",{className:"purchase",disabled:!0},"Purchase land"),n.a.createElement("button",{className:"pay",disabled:!0},"Pay rent"),n.a.createElement("button",{className:"upgrade",disabled:!0},"Upgrade land"),n.a.createElement("button",{className:"recruit",disabled:!0},"Recruit gangster"),n.a.createElement("button",{className:"assault",disabled:!0},"Assault property"),n.a.createElement("button",{className:"endTurn",disabled:!0},"End turn"),n.a.createElement("div",{className:"playersInfoWrapper"},n.a.createElement("div",{className:"playersInfo"},"player 1",n.a.createElement("br",null),"territory: ",this.state.players[1].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[1].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[1].army,n.a.createElement("br",null),"money: $",this.state.players[1].money),n.a.createElement("div",{className:"playersInfo"},"player 2",n.a.createElement("br",null),"territory: ",this.state.players[2].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[2].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[2].army,n.a.createElement("br",null),"money: $",this.state.players[2].money,n.a.createElement("br",null)),n.a.createElement("div",{className:"playersInfo"},"player 3",n.a.createElement("br",null),"territory: ",this.state.players[3].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[3].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[3].army,n.a.createElement("br",null),"money: $",this.state.players[3].money),n.a.createElement("div",{className:"playersInfo"},"player 4",n.a.createElement("br",null),"territory: ",this.state.players[4].territory.length,n.a.createElement("br",null),"railways owned: ",this.state.players[4].railsOwned,n.a.createElement("br",null),"gangsters: ",this.state.players[4].army,n.a.createElement("br",null),"money: $",this.state.players[4].money,n.a.createElement("br",null)))))}}]),t}(n.a.Component),S=a(16),k=a.n(S),C=(a(42),a(51),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPressCreate=function(e){a.roomId=parseInt(1e5*Math.random()).toString(10),a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),f.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friend",text:a.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),a.setState({piece:"1",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},a.onPressJoin=function(e){f.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"blue",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class "}}).then(function(e){e.value&&a.joinRoom(e.value)})},a.joinRoom=function(e){a.roomId=e,a.lobbyChannel="mafiaLobby--"+a.roomId,a.pubnub.hereNow({channels:[a.lobbyChannel]}).then(function(e){alert("Current players in the room: "+e.totalOccupancy),e.totalOccupancy<4?(a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),a.setState({piece:(1+e.totalOccupancy).toString()}),a.pubnub.publish({message:{notRoomCreator:!0},channel:a.lobbyChannel})):f.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},a.endGame=function(){a.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.unsubscribe({channels:[a.lobbyChannel,a.gameChannel]})},a.pubnub=new k.a({publishKey:"pub-c-7ff08bc5-f641-4297-aef9-00f08ecdd561",subscribeKey:"sub-c-a408ea2a-1236-11ea-8755-faba8a6641c7",uuid:parseInt(1e5*Math.random()).toString(10)}),a.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.init(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.notRoomCreator&&(e.gameChannel="mafiaGame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),f.a.close())})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"title"},n.a.createElement("p",null,"Mafia wars")),!this.state.isPlaying&&n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"button-container"},n.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),n.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join"))),this.state.isPlaying&&n.a.createElement(q,{roomId:this.roomId,pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,endGame:this.endGame}))}}]),t}(r.Component));l.a.render(n.a.createElement(C,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.afae2c97.chunk.js.map